import"../chunks/Bzak7iHL.js";import{d as Se,o as Me,e as Ne,s as h}from"../chunks/C8st8IW6.js";import{p as Pe,e as w,g as Xe,f as b,d as Y,h as n,s,a as u,b as ze,ao as Ee,c as t,j as de,r as e,i as a,k as ve,t as B}from"../chunks/jB7C_rnE.js";import{i as U}from"../chunks/Bp5l5fH2.js";import{e as Te}from"../chunks/B_9GqA3w.js";import{b as _}from"../chunks/CgC7qgJv.js";import{u as qe,h as ce}from"../chunks/DkC0pIUA.js";import{I as pe,D as Ke}from"../chunks/rVTgO4vC.js";import{I as H}from"../chunks/BCisTzWU.js";import{T as Oe}from"../chunks/CpfQv8U7.js";import{C as Re}from"../chunks/DydEdpK0.js";import{I as Ve}from"../chunks/BInuoN8E.js";var Ye=b('<div class="flex h-64 items-center justify-center"><!></div>'),Be=b('<div class="rounded-lg bg-red-50 p-4 dark:bg-red-900/20"><p class="text-sm text-red-600 dark:text-red-400"> </p></div>'),He=b('<div class="flex h-64 flex-col items-center justify-center text-gray-500 dark:text-gray-400"><!> <p class="text-lg font-medium">No images yet</p> <p class="mt-2 text-sm">Click "Generate New" to create your first AI image</p></div>'),Je=b('<div class="group relative overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm transition-all hover:shadow-lg dark:border-gray-800 dark:bg-gray-900"><button type="button" class="block w-full overflow-hidden"><img class="aspect-square w-full object-cover transition-transform group-hover:scale-105" loading="lazy"/></button> <div class="absolute inset-0 flex flex-col items-center justify-center gap-2 bg-black/60 opacity-0 transition-opacity group-hover:opacity-100"><div class="flex gap-2"><button type="button" class="rounded-lg bg-white p-2 text-gray-900 transition-transform hover:scale-110" aria-label="View fullscreen"><!></button> <a download="generated-image.png" class="rounded-lg bg-white p-2 text-gray-900 transition-transform hover:scale-110" aria-label="Download"><!></a> <button type="button" class="rounded-lg bg-red-600 p-2 text-white transition-transform hover:scale-110" aria-label="Delete"><!></button></div> <div class="mt-2 px-4 text-center"><span class="inline-block rounded-full bg-black/50 px-2 py-1 text-xs text-white backdrop-blur-sm"> </span></div></div> <div class="p-3"><p class="line-clamp-2 text-sm text-gray-700 dark:text-gray-300 svelte-16h6p05"> </p> <div class="mt-2 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400"><span> </span> <span class="truncate pl-2"> </span></div></div></div>'),Qe=b('<div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"></div>'),We=b('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/90 p-4" role="dialog" aria-modal="true" tabindex="-1"><button type="button" class="absolute right-4 top-4 rounded-lg bg-white p-2 text-gray-900 shadow-lg transition-transform hover:scale-110 dark:bg-gray-800 dark:text-gray-100" aria-label="Close"><!></button> <div class="max-h-[90vh] max-w-[90vw]" role="document"><img class="max-h-[80vh] w-auto rounded-lg shadow-2xl"/> <div class="mt-4 rounded-lg bg-white p-4 dark:bg-gray-800"><p class="text-sm font-medium text-gray-900 dark:text-gray-100"> </p> <div class="mt-3 flex gap-3"><a download="generated-image.png" class="flex-1 rounded-lg bg-blue-600 px-4 py-2 text-center font-medium text-white transition-colors hover:bg-blue-700">Download Image</a> <button type="button" class="flex-1 rounded-lg border border-gray-300 px-4 py-2 font-medium text-gray-700 transition-colors hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">Close</button></div></div></div></div>'),Ze=b('<div class="flex h-screen max-h-screen flex-col overflow-hidden md:pl-14"><div class="flex-shrink-0 border-b border-gray-200 bg-white px-6 py-4 dark:border-gray-800 dark:bg-gray-900"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold text-gray-900 dark:text-gray-100">Image Gallery</h1> <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">Your AI-generated images with FLUX</p></div> <button type="button" class="rounded-lg bg-blue-600 px-4 py-2 font-semibold text-white shadow-md transition-all hover:bg-blue-700"><span class="flex items-center gap-2"><!> Generate New</span></button></div></div> <div class="flex-1 overflow-y-auto overflow-x-hidden p-6"><!></div></div> <!> <!>',1);function ct(ue,ge){Pe(ge,!0);let k=w(Xe([])),M=w(!0),I=w(null),x=w(null),N=w(!1),D=w(null);const J=qe();async function Q(){n(M,!0),n(I,null);try{const r=await J.images.get().then(ce);n(k,(r.images||[]).map(o=>({...o,_id:o._id.toString(),cloudinaryUrl:o.url})),!0)}catch(r){console.error("Failed to load images:",r),n(I,String(r),!0)}finally{n(M,!1)}}async function me(r){if(confirm("Are you sure you want to delete this image?")){n(D,r,!0);try{await J.images({imageId:r}).delete().then(ce),n(k,a(k).filter(o=>o._id!==r),!0)}catch(o){console.error("Failed to delete image:",o),n(I,String(o),!0)}finally{n(D,null)}}}function W(r){n(x,r,!0)}function F(){n(x,null)}function Z(r){r.key==="Escape"&&F()}function fe(){Q()}Me(()=>{Q()});var $=Ze();Ne("keydown",Ee,Z);var P=Y($),X=t(P),ee=t(X),z=s(t(ee),2);z.__click=()=>n(N,!0);var te=t(z),xe=t(te);H(xe,{class:"text-lg"}),de(),e(te),e(z),e(ee),e(X);var ae=s(X,2),_e=t(ae);{var be=r=>{var o=Ye(),g=t(o);pe(g,{}),e(o),u(r,o)},ye=r=>{var o=ve(),g=Y(o);{var E=i=>{var d=Be(),m=t(d),j=t(m);e(m),e(d),B(()=>h(j,`Error: ${a(I)??""}`)),u(i,d)},y=i=>{var d=ve(),m=Y(d);{var j=v=>{var c=He(),p=t(c);H(p,{class:"mb-4 text-6xl opacity-50"}),de(4),e(c),u(v,c)},C=v=>{var c=Qe();Te(c,21,()=>a(k),p=>p._id,(p,l)=>{var T=Je(),A=t(T);A.__click=()=>W(a(l));var oe=t(A);e(A);var q=s(A,2),K=t(q),G=t(K);G.__click=()=>W(a(l));var ke=t(G);H(ke,{class:"text-xl"}),e(G);var L=s(G,2),Ie=t(L);Ke(Ie,{class:"text-xl"}),e(L);var S=s(L,2);S.__click=()=>me(a(l)._id);var je=t(S);{var Ue=f=>{pe(f,{})},De=f=>{Oe(f,{class:"text-xl"})};U(je,f=>{a(D)===a(l)._id?f(Ue):f(De,!1)})}e(S),e(K);var se=s(K,2),le=t(se),Fe=t(le,!0);e(le),e(se),e(q);var ne=s(q,2),O=t(ne),Ce=t(O,!0);e(O);var ie=s(O,2),R=t(ie),Ae=t(R,!0);e(R);var V=s(R,2),Ge=t(V,!0);e(V),e(ie),e(ne),e(T),B((f,Le)=>{_(oe,"src",a(l).url),_(oe,"alt",a(l).prompt),_(L,"href",a(l).url),S.disabled=a(D)===a(l)._id,h(Fe,a(l).modelUsed||"FLUX.1-schnell"),h(Ce,a(l).prompt),h(Ae,f),_(V,"title",a(l).modelUsed),h(Ge,Le)},[()=>new Date(a(l).createdAt).toLocaleDateString(),()=>a(l).modelUsed?a(l).modelUsed.split("/").pop():"FLUX.1-schnell"]),u(p,T)}),e(c),u(v,c)};U(m,v=>{a(k).length===0?v(j):v(C,!1)},!0)}u(i,d)};U(g,i=>{a(I)?i(E):i(y,!1)},!0)}u(r,o)};U(_e,r=>{a(M)?r(be):r(ye,!1)})}e(ae),e(P);var re=s(P,2);{var he=r=>{var o=We();o.__click=F,o.__keydown=Z;var g=t(o);g.__click=F;var E=t(g);Re(E,{class:"text-2xl"}),e(g);var y=s(g,2);y.__click=p=>p.stopPropagation(),y.__keydown=p=>p.stopPropagation();var i=t(y),d=s(i,2),m=t(d),j=t(m,!0);e(m);var C=s(m,2),v=t(C),c=s(v,2);c.__click=F,e(C),e(d),e(y),e(o),B(()=>{_(i,"src",a(x).url),_(i,"alt",a(x).prompt),h(j,a(x).prompt),_(v,"href",a(x).url)}),u(r,o)};U(re,r=>{a(x)&&r(he)})}var we=s(re,2);Ve(we,{onImageGenerated:fe,get open(){return a(N)},set open(r){n(N,r,!0)}}),u(ue,$),ze()}Se(["click","keydown"]);export{ct as component};
