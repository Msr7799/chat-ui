import"../chunks/Bzak7iHL.js";import{d as Hr,o as Mr,e as Fr,s as R,b as Nr}from"../chunks/C8st8IW6.js";import{p as zr,e as u,g as Ze,f as p,s as n,c as l,t as E,i as t,a as d,b as Wr,h as a,j as M,r as o,ap as Jr,u as Vr,aq as pe,k as Re,d as ye}from"../chunks/jB7C_rnE.js";import{i as g}from"../chunks/Bp5l5fH2.js";import{e as Ge}from"../chunks/B_9GqA3w.js";import{b as V,r as Yr}from"../chunks/CgC7qgJv.js";import{a as Tt}from"../chunks/CeoL9yOQ.js";import{b as $e}from"../chunks/DUPt1t1G.js";import{s as Br,a as qr}from"../chunks/D-VCVtW5.js";import{p as Qr}from"../chunks/zVwYyC33.js";import{u as Xr,h as Ue}from"../chunks/DkC0pIUA.js";import{I as ge,D as Zr}from"../chunks/rVTgO4vC.js";import{I as $r}from"../chunks/BrYwELkr.js";import{I as Ct}from"../chunks/wrqN8MQ3.js";import{I as Lt}from"../chunks/ByPW2F0P.js";import{C as et}from"../chunks/Ce7v3j9V.js";import{T as Rt}from"../chunks/CpfQv8U7.js";import{C as Ae}from"../chunks/DydEdpK0.js";import{U as ea}from"../chunks/IYyS0das.js";import{C as ta}from"../chunks/DYW_nCQ1.js";var ra=p('<div class="flex h-64 items-center justify-center"><div class="space-y-3 text-center"><!> <p class="text-gray-400">Loading images...</p></div></div>'),aa=p('<div class="rounded-xl border border-red-500/30 bg-red-900/20 p-6"><p class="text-red-400"> </p></div>'),oa=p('<button type="button" class="group relative h-80 w-80 flex-shrink-0 cursor-pointer overflow-hidden rounded-2xl border-2 border-white/10 transition-all hover:scale-105 hover:border-purple-500 hover:shadow-2xl hover:shadow-purple-500/30"><img class="h-full w-full object-cover transition-transform group-hover:scale-110" loading="lazy"/> <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 transition-opacity group-hover:opacity-100"></div></button>'),la=p('<div><h2 class="mb-4 text-xl font-bold text-white">âœ¨ Starter Inspiration</h2> <div class="overflow-x-auto pb-4"><div class="flex gap-6" style="width: max-content;"></div></div></div>'),ia=p('<div class="group relative h-80 w-80 flex-shrink-0 overflow-hidden rounded-2xl border-2 border-white/10 transition-all hover:scale-105 hover:border-blue-500 hover:shadow-2xl hover:shadow-blue-500/30"><button type="button" class="h-full w-full cursor-pointer"><img class="h-full w-full object-cover transition-transform group-hover:scale-110" loading="lazy"/></button> <div class="pointer-events-none absolute inset-0 bg-gradient-to-t from-black/90 via-black/30 to-transparent opacity-0 transition-opacity group-hover:opacity-100"><div class="absolute bottom-0 left-0 right-0 p-4"><p class="line-clamp-3 text-sm font-medium text-white svelte-mf1avr"> </p></div></div> <div class="absolute right-3 top-3 flex gap-2 opacity-0 transition-opacity group-hover:opacity-100"><button type="button" class="rounded-lg bg-white/90 p-2.5 text-gray-900 shadow-lg backdrop-blur-sm hover:bg-white"><!></button> <button type="button" class="rounded-lg bg-red-500/90 p-2.5 text-white shadow-lg backdrop-blur-sm hover:bg-red-600 disabled:opacity-50"><!></button></div></div>'),sa=p('<div><h2 class="mb-4 text-xl font-bold text-white">ðŸŽ¨ Your Creations</h2> <div class="overflow-x-auto pb-4"><div class="flex gap-6" style="width: max-content;"></div></div></div>'),na=p('<div class="flex h-64 items-center justify-center"><div class="space-y-3 text-center"><div class="text-6xl">ðŸŽ¨</div> <p class="font-medium text-gray-400">No images yet. Create your first masterpiece!</p></div></div>'),da=p("<!> <!>",1),ca=p('<img src="/google_studio_page/banana_icon.svg" alt="banana" class="h-4 w-4"/>'),va=p('<span class="rounded-full bg-emerald-500/20 px-2.5 py-0.5 text-xs font-bold text-emerald-400">4K</span>'),ua=p('<span class="rounded-full bg-indigo-500/20 px-2.5 py-0.5 text-xs font-bold text-indigo-400">Vision</span>'),pa=p('<img src="/google_studio_page/banana_icon.svg" alt="banana" class="h-4 w-4 flex-none"/>'),ga=p('<span class="rounded-full bg-emerald-500/20 px-2 py-0.5 text-xs font-bold text-emerald-400">4K</span>'),ba=p('<span class="rounded-full bg-indigo-500/20 px-2 py-0.5 text-xs font-bold text-indigo-400">Vision</span>'),fa=p('<button type="button" class="flex w-full items-center gap-3 px-4 py-3 text-left text-sm transition-colors hover:bg-gray-800/50"><!> <span class="flex-1"><span class="block font-medium text-white"> </span> <span class="block truncate text-xs text-gray-500"> </span></span> <div class="flex gap-1.5"><!> <!></div></button>'),ma=p('<div class="absolute bottom-full left-0 right-0 z-50 mb-2 max-h-72 overflow-auto rounded-xl border border-gray-700 bg-gray-900/95 shadow-2xl backdrop-blur-xl"></div>'),_a=p('<div class="relative h-14 w-14 flex-shrink-0 overflow-hidden rounded-xl border-2 border-blue-500"><img alt="Reference" class="h-full w-full object-cover"/> <button type="button" class="absolute -right-2 -top-2 rounded-full bg-red-500 p-1 text-white shadow-lg hover:bg-red-600"><!></button></div>'),xa=p('<button type="button" class="flex h-14 w-14 flex-shrink-0 items-center justify-center rounded-xl border-2 border-dashed border-gray-700 text-gray-400 transition-all hover:border-blue-500 hover:text-blue-400"><!></button>'),ya=p('<div class="px-3 py-2 text-sm text-gray-400">No saved prompts yet</div>'),ha=p('<button type="button" class="w-full px-3 py-2 text-left text-sm text-white hover:bg-gray-800/50"><span class="block truncate"> </span></button>'),wa=p('<div class="absolute bottom-full right-0 z-50 mb-2 max-h-56 w-full overflow-auto rounded-xl border border-gray-700 bg-gray-900/95 shadow-2xl backdrop-blur-xl" role="listbox"><!></div>'),ka=p('<span class="flex items-center justify-center gap-2"><!> Generating...</span>'),Ia=p('<button type="button" class="flex h-14 w-14 items-center justify-center rounded-xl border-2 border-gray-600/60 bg-gray-800/40 text-gray-200 transition-all hover:bg-gray-700/50 disabled:cursor-not-allowed disabled:opacity-50" title="Set Google Studio API key"><!></button>'),Pa=p('<div class="rounded-lg border border-red-500/30 bg-red-900/30 px-4 py-2 text-sm text-red-400"> </div>'),Sa=p('<div class="rounded-lg border border-green-500/30 bg-green-900/30 px-4 py-2 text-sm text-green-400"> </div>'),Ea=p('<p class="text-sm text-red-400"> </p>'),ja=p('<p class="text-sm text-green-400">Saved</p>'),Ta=p('<div class="fixed inset-0 z-[10000] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm" role="button" tabindex="0"><div class="w-full max-w-xl overflow-hidden rounded-2xl border border-white/10 bg-gray-900 shadow-2xl" role="document" tabindex="-1"><div class="flex items-center justify-between border-b border-white/10 px-4 py-3"><div class="flex items-center gap-2"><!> <p class="text-sm font-semibold text-white">Google Studio API Key</p></div> <button type="button" class="rounded-lg p-2 text-gray-400 hover:bg-gray-800 hover:text-white"><!></button></div> <div class="space-y-3 p-4"><a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noreferrer" class="inline-flex text-sm text-blue-400 underline decoration-blue-400/40 underline-offset-2 hover:decoration-blue-400">Open Google AI Studio</a> <div class="flex items-center gap-2"><input placeholder="AIza..." class="w-full rounded-xl border border-white/10 bg-gray-800/50 px-4 py-3 text-sm text-white placeholder:text-gray-500"/> <button type="button" class="rounded-lg border border-gray-600 px-3 py-2 text-sm text-gray-200 hover:bg-gray-800"> </button></div> <!> <!> <div class="flex items-center justify-end gap-2"><button type="button" class="rounded-lg border border-gray-600 px-3 py-2 text-sm text-gray-200 hover:bg-gray-800 disabled:opacity-50">Cancel</button> <button type="button" class="rounded-lg bg-blue-600 px-3 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50">Save</button></div></div></div></div>'),Ca=p('<button type="button" class="inline-flex items-center gap-2 rounded-lg bg-red-600 px-3 py-2 text-sm font-medium text-white hover:bg-red-700 disabled:opacity-50"><!> Delete</button>'),La=p('<div class="fixed inset-0 z-[9999] flex items-center justify-center bg-black/90 p-4 backdrop-blur-xl" role="dialog" aria-modal="true" tabindex="-1"><div class="relative w-full max-w-6xl overflow-hidden rounded-2xl bg-gray-900 shadow-2xl" tabindex="-1"><div class="flex items-center justify-between border-b border-white/10 bg-gradient-to-r from-gray-900 to-gray-800 px-6 py-4"><p class="truncate pr-4 text-sm font-medium text-white"> </p> <div class="flex items-center gap-2"><button type="button" class="inline-flex items-center gap-2 rounded-lg border-2 border-gray-700 px-3 py-2 text-sm font-medium text-white hover:bg-gray-800"><!> Copy Link</button> <button type="button" class="inline-flex items-center gap-2 rounded-lg border-2 border-gray-700 px-3 py-2 text-sm font-medium text-white hover:bg-gray-800"><!> Copy Image</button> <a download="gemini-image.png" class="inline-flex items-center gap-2 rounded-lg bg-blue-600 px-3 py-2 text-sm font-medium text-white hover:bg-blue-700"><!> Download</a> <!> <button type="button" class="rounded-lg p-2 text-gray-400 hover:bg-gray-800 hover:text-white"><!></button></div></div> <div class="bg-black"><img class="max-h-[80vh] w-full object-contain"/></div></div></div>'),Ra=p('<p class="text-sm text-red-400"> </p>'),Ga=p('<div class="flex items-center gap-2 text-gray-400"><!> <span>Enhancing...</span></div>'),Ua=p('<div class="fixed inset-0 z-[10000] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm"><div class="w-full max-w-3xl overflow-hidden rounded-2xl border border-white/10 bg-gray-900 shadow-2xl"><div class="flex items-center justify-between border-b border-white/10 bg-gradient-to-r from-purple-900/50 to-gray-900 px-4 py-3"><div class="flex items-center gap-2"><!> <p class="text-sm font-semibold text-white">Enhance Prompt with AI</p></div> <button type="button" class="rounded-lg p-2 text-gray-400 hover:bg-gray-800 hover:text-white"><!></button></div> <div class="space-y-3 p-4"><div><p class="mb-1 text-xs font-medium text-gray-400">Original Prompt</p> <div class="rounded-lg border border-white/10 bg-gray-800/50 p-3 text-sm text-white"> </div></div> <div><p class="mb-1 text-xs font-medium text-gray-400">Enhanced Prompt</p> <div class="min-h-[120px] rounded-lg border border-white/10 bg-gray-800/50 p-3 text-sm text-white"><!></div></div> <div class="flex flex-wrap items-center justify-end gap-2 pt-1"><button type="button" class="rounded-lg border border-gray-600 px-3 py-2 text-sm font-medium text-gray-300 hover:bg-gray-800 disabled:cursor-not-allowed disabled:opacity-50">Cancel</button> <button type="button" class="rounded-lg border border-gray-600 px-3 py-2 text-sm font-medium text-gray-300 hover:bg-gray-800 disabled:cursor-not-allowed disabled:opacity-50">Regenerate</button> <button type="button" class="rounded-lg bg-gradient-to-r from-blue-600 to-purple-600 px-3 py-2 text-sm font-medium text-white hover:from-blue-700 hover:to-purple-700 disabled:cursor-not-allowed disabled:opacity-50">Use This</button></div></div></div></div>'),Aa=p('<div class="google-images-page flex h-screen max-h-screen flex-col overflow-hidden bg-gradient-to-br from-gray-950 via-gray-900 to-black svelte-mf1avr"><div class="relative flex-shrink-0 border-b border-white/10 bg-gray-900/50"><div class="px-6 py-6"><div class="mx-auto max-w-7xl"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><!> <h1 class="text-2xl font-bold text-white">Gemini Image Studio</h1></div> <button type="button" class="rounded-xl border-2 border-gray-700 bg-gray-800/50 px-4 py-2 text-sm font-medium text-white backdrop-blur-xl transition-all hover:border-blue-500 hover:bg-gray-700/50"><!></button></div></div></div></div> <div class="flex-1 overflow-y-auto px-6 py-8"><div class="mx-auto max-w-7xl space-y-8"><div class="space-y-6"><!></div> <div class="rounded-2xl border border-white/10 bg-gradient-to-br from-gray-900/80 via-gray-900/60 to-gray-900/80 p-6 shadow-2xl backdrop-blur-2xl"><div class="space-y-4"><div class="flex gap-3"><div class="relative flex-1"><button type="button" class="flex w-full items-center justify-between gap-3 rounded-xl border-2 border-gray-700 bg-gray-800/50 px-4 py-3.5 text-left text-sm text-white shadow-lg transition-all hover:border-blue-500 focus:border-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-500/20 disabled:cursor-not-allowed disabled:opacity-50"><span class="flex items-center gap-2 truncate"><!> <!></span> <div class="flex items-center gap-2"><!> <!></div></button> <!></div> <!> <input type="file" accept="image/*" class="hidden"/></div> <div class="relative"><textarea rows="3" placeholder="Describe your image in vivid detail..." class="w-full resize-none rounded-xl border-2 border-gray-700 bg-gray-800/50 px-4 py-3 pr-12 text-white shadow-lg backdrop-blur-xl transition-all placeholder:text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-500/20"></textarea> <button type="button" class="absolute right-2 top-2 flex h-10 w-10 items-center justify-center rounded-lg border border-gray-600 bg-gray-700/50 text-gray-300 shadow-sm hover:bg-gray-600/50 disabled:cursor-not-allowed disabled:opacity-50" aria-label="Prompt History" title="Last 5 prompts"><!></button> <!></div> <div class="flex gap-2"><button type="button" class="flex-1 rounded-xl bg-blue-600 px-6 py-4 text-sm font-bold text-white shadow-lg shadow-blue-500/30 transition-all hover:scale-[1.02] hover:bg-blue-700 hover:shadow-xl hover:shadow-blue-500/40 disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:scale-100"><!></button> <button type="button" class="flex h-14 w-14 items-center justify-center rounded-xl border-2 border-purple-500/50 bg-purple-500/10 text-purple-400 transition-all hover:border-purple-400 hover:bg-purple-500/20 disabled:cursor-not-allowed disabled:opacity-50" title="Enhance Prompt with AI"><!></button> <!></div> <!> <!></div></div> <!> <!> <!></div></div></div>');function ro(Gt,Ut){zr(Ut,!0);const At=()=>qr(Qr,"$page",Dt),[Dt,Ot]=Br(),he=Xr(),tt="google_images_prompt_history",rt=[{url:"/google_studio_page/1.png",prompt:"Starter image 1"},{url:"/google_studio_page/2.webp",prompt:"Starter image 2"},{url:"/google_studio_page/3.webp",prompt:"Starter image 3"},{url:"/google_studio_page/4.webp",prompt:"Starter image 4"},{url:"/google_studio_page/5.png",prompt:"Starter image 5"},{url:"/google_studio_page/6.webp",prompt:"Starter image 6"}];let we=u(Ze([])),te=u(!1),at=u(null),F=u(""),G=u(""),U=u(!1),De=u(null),Z=u(null),Oe=u(null),Y=u(null),$=u(Ze([])),re=u(!1),ae=u(null),I=u(null),Ke=u(null),be=u(null),oe=u(null),N=u(null),B=u(!1),ke=u(null),W=u(!1),Ie=u(null),le=u(Ze([])),He=u(!1),q=u(!1),ie=u(null),J=u(""),se=u(""),ot=u(""),A=null,ne=u(!1),Me=u(""),Pe=u(!1),de=u(!1),Se=u(null),Ee=u(!1);async function Kt(){a(de,!0),a(Se,null),a(Ee,!1);try{const e=await fetch(`${Nr}/api/config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({GEMINI_API_KEY:t(Me)})});if(!e.ok){const r=await e.text().catch(()=>"");throw new Error(r||`HTTP ${e.status}`)}a(Ee,!0),setTimeout(()=>a(Ee,!1),2e3)}catch(e){a(Se,String((e==null?void 0:e.message)??e),!0)}finally{a(de,!1)}}function Ht(e){const r=e.modelUsed??"";return r.startsWith("gemini-")&&r.includes("image")}function ce(e){return e.replace(/^models\//,"")}async function lt(e){if(!e.type.startsWith("image/")){a(Z,"Please select an image file");return}a(Z,null),t(Y)&&URL.revokeObjectURL(t(Y)),a(Y,URL.createObjectURL(e),!0);const r=await new Promise((i,s)=>{const v=new FileReader;v.onload=()=>i(String(v.result||"")),v.onerror=()=>s(v.error),v.readAsDataURL(e)});a(Oe,{data:r,mimeType:e.type},!0)}function it(e){const i=ce(e).replace(/[:]/g," ").replace(/_/g,"-");return i.startsWith("gemini-")?i.replace(/^gemini-/,"Gemini ").replace(/-image-(generation|preview)/g,"").replace(/-image/g,"").replace(/-exp\b/g," Exp").replace(/-pro\b/g," Pro").replace(/-flash\b/g," Flash").replace(/\s+/g," ").replace(/-/g," ").trim():i.startsWith("imagen-")?i.replace(/^imagen-/,"Imagen ").replace(/-generate-preview/g,"").replace(/-fast\b/g," Fast").replace(/-ultra\b/g," Ultra").replace(/\s+/g," ").replace(/-/g," ").trim():i.replace(/-/g," ").trim()}function st(e){const r=ce(e).toLowerCase();return r.includes("vision")||r.includes("image-preview")||r.includes("pro-image-preview")}function nt(e){const r=ce(e).toLowerCase();return r.includes("imagen-4")||r.includes("ultra")}function dt(e){return ce(e).toLowerCase().includes("banana")}function Mt(){t(U)||t(te)||a(B,!t(B))}function Ft(e){a(G,e,!0),a(B,!1)}function ct(e){const r=e.target;t(B)&&t(ke)&&r&&!t(ke).contains(r)&&a(B,!1),t(W)&&t(Ie)&&r&&!t(Ie).contains(r)&&a(W,!1)}function Nt(){if(!(typeof localStorage>"u"))try{const e=localStorage.getItem(tt),r=e?JSON.parse(e):[];Array.isArray(r)&&a(le,r.map(i=>String(i)).filter(Boolean).slice(0,5),!0)}catch{a(le,[],!0)}}function zt(e){if(a(le,e,!0),!(typeof localStorage>"u"))try{localStorage.setItem(tt,JSON.stringify(e))}catch{}}function Wt(e){const r=String(e||"").trim();if(!r)return;const i=[r,...t(le).filter(s=>s!==r)].slice(0,5);zt(i)}function Jt(){a(W,!t(W)),t(W)&&a(B,!1)}function Vt(e){a(F,e,!0),a(W,!1)}async function vt(e){var r;try{const i=await fetch(e);if(!i.ok)throw new Error("Failed to download image");const s=await i.blob(),v=window.ClipboardItem;if(!v||!((r=navigator.clipboard)!=null&&r.write))throw new Error("Clipboard image write is not supported");await navigator.clipboard.write([new v({[s.type||"image/png"]:s})]),a(N,"ØªÙ… Ù†Ø³Ø® Ø§Ù„ØµÙˆØ±Ø©"),setTimeout(()=>{a(N,null)},1500)}catch{a(N,"ØªØ¹Ø°Ø± Ù†Ø³Ø® Ø§Ù„ØµÙˆØ±Ø©"),setTimeout(()=>{a(N,null)},2e3)}}async function Yt(e){if(!e.clipboardData)return;const i=Array.from(e.clipboardData.files).find(s=>s.type.startsWith("image/"));i&&(e.preventDefault(),await lt(i))}function Bt(){a(ot,t(F),!0),a(He,!0),a(J,""),a(se,""),a(ie,null),ut()}function Fe(){a(He,!1),a(q,!1),a(ie,null),a(J,""),a(se,""),A&&(clearInterval(A),A=null)}async function ut(){if(!t(q)){a(q,!0),a(ie,null),a(J,""),a(se,""),A&&(clearInterval(A),A=null);try{const e=await fetch("/api/deepseek/prompt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:t(F)})});if(!e.ok){const v=await e.text().catch(()=>"");throw new Error(v||`HTTP ${e.status}`)}const r=await e.json(),i=String((r==null?void 0:r.prompt)??"").trim();if(!i)throw new Error("Empty prompt");a(J,i,!0);let s=0;A=setInterval(()=>{s+=1,a(se,t(J).slice(0,s),!0),s>=t(J).length&&A&&(clearInterval(A),A=null)},12)}catch(e){a(ie,String((e==null?void 0:e.message)??e),!0)}finally{a(q,!1)}}}function qt(){t(J)&&(a(F,t(J),!0),Fe())}function pt(e){e.key==="Escape"&&(a(B,!1),a(W,!1))}async function Qt(){if(!t(te)){a(te,!0),a(at,null);try{const e=await he.images.google.models.get(),r=Ue(e);a(we,(r.models||[]).filter(i=>typeof i.id=="string"&&i.id.includes("image")).sort((i,s)=>(s.created??0)-(i.created??0)),!0),!t(G)&&t(we).length>0&&a(G,t(we)[0].id,!0)}catch(e){a(at,String(e),!0)}finally{a(te,!1)}}}async function Ne(){if(!t(re)){a(re,!0),a(ae,null);try{const e=await he.images.get({query:{limit:"100"}}),i=(Ue(e).images||[]).map(s=>({...s,_id:s._id.toString(),createdAt:s.createdAt}));a($,i.filter(Ht),!0)}catch(e){a(ae,String(e),!0)}finally{a(re,!1)}}}async function gt(){var e;if(!(!t(F).trim()||t(U))){if(!t(G)){a(Z,"Please select a model");return}Wt(t(F).trim()),a(U,!0),a(Z,null),a(De,null);try{const r=await he.images.google.generate.post({prompt:t(F).trim(),model:t(G),referenceImage:t(Oe)??void 0}),i=Ue(r);if(!i.success||!((e=i.image)!=null&&e.url))throw new Error(i.error||"Google image generation failed");a(De,i.image.url,!0),a(be,{_id:`local-${Date.now()}`,prompt:t(F).trim(),url:i.image.url,modelUsed:ce(t(G)),createdAt:new Date},!0),a($,[t(be),...t($)].slice(0,100),!0),a(I,t(be),!0),await Ne()}catch(r){a(Z,String(r),!0)}finally{a(U,!1)}}}function Xt(){var e;(e=t(Ke))==null||e.click()}async function Zt(e){var s;const r=e.currentTarget,i=(s=r==null?void 0:r.files)==null?void 0:s[0];i&&await lt(i)}function $t(){t(Y)&&URL.revokeObjectURL(t(Y)),a(Y,null),a(Oe,null)}function je(){a(I,null)}async function er(e){try{await navigator.clipboard.writeText(e),a(N,"ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·"),setTimeout(()=>{a(N,null)},1500)}catch{a(N,"ÙØ´Ù„ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·"),setTimeout(()=>{a(N,null)},2e3)}}async function bt(e){var r,i;if(!(!(e!=null&&e._id)||e._id.startsWith("local-")||e.modelUsed==="starter")&&confirm("Are you sure you want to delete this image?")){a(oe,e._id,!0),a(ae,null);try{await he.images({imageId:e._id}).delete().then(Ue),a($,t($).filter(s=>s._id!==e._id),!0),((r=t(be))==null?void 0:r._id)===e._id&&(a(be,null),a(De,null)),((i=t(I))==null?void 0:i._id)===e._id&&je()}catch(s){a(ae,String(s),!0)}finally{a(oe,null)}}}function tr(e){e.key==="Escape"&&je()}Mr(()=>{if(!(typeof document>"u"))return document.addEventListener("pointerdown",ct),document.addEventListener("keydown",pt),Nt(),Promise.all([Qt(),Ne()]),()=>{document.removeEventListener("pointerdown",ct),document.removeEventListener("keydown",pt),A&&(clearInterval(A),A=null)}});var ze=Aa(),We=l(ze),ft=l(We),mt=l(ft),_t=l(mt),Je=l(_t),rr=l(Je);$r(rr,{classNames:"h-8 w-8 text-blue-400"}),M(2),o(Je);var Te=n(Je,2);Te.__click=Ne;var ar=l(Te);{var or=e=>{ge(e,{})},lr=e=>{var r=pe("Refresh");d(e,r)};g(ar,e=>{t(re)?e(or):e(lr,!1)})}o(Te),o(_t),o(mt),o(ft),o(We);var xt=n(We,2),yt=l(xt),Ve=l(yt),ir=l(Ve);{var sr=e=>{var r=ra(),i=l(r),s=l(i);ge(s,{}),M(2),o(i),o(r),d(e,r)},nr=e=>{var r=Re(),i=ye(r);{var s=b=>{var f=aa(),y=l(f),P=l(y,!0);o(y),o(f),E(()=>R(P,t(ae))),d(b,f)},v=b=>{var f=da(),y=ye(f);{var P=x=>{var w=la(),D=n(l(w),2),C=l(D);Ge(C,21,()=>rt,L=>L.url,(L,c)=>{var m=oa();m.__click=()=>a(I,{_id:t(c).url,url:t(c).url,prompt:t(c).prompt,modelUsed:"starter",createdAt:new Date},!0);var h=l(m);M(2),o(m),E(()=>{V(h,"src",t(c).url),V(h,"alt",t(c).prompt)}),d(L,m)}),o(C),o(D),o(w),d(x,w)};g(y,x=>{rt.length>0&&x(P)})}var S=n(y,2);{var k=x=>{var w=sa(),D=n(l(w),2),C=l(D);Ge(C,21,()=>t($),L=>L._id,(L,c)=>{var m=ia(),h=l(m);h.__click=()=>a(I,t(c),!0);var _=l(h);o(h);var T=n(h,2),O=l(T),Q=l(O),K=l(Q,!0);o(Q),o(O),o(T);var ee=n(T,2),H=l(ee);H.__click=z=>{z.stopPropagation(),vt(t(c).url)};var X=l(H);et(X,{class:"text-lg"}),o(H);var ue=n(H,2);ue.__click=z=>{z.stopPropagation(),bt(t(c))};var Dr=l(ue);{var Or=z=>{ge(z,{})},Kr=z=>{Rt(z,{class:"text-lg"})};g(Dr,z=>{t(oe)===t(c)._id?z(Or):z(Kr,!1)})}o(ue),o(ee),o(m),E(()=>{V(_,"src",t(c).url),V(_,"alt",t(c).prompt),R(K,t(c).prompt),ue.disabled=t(oe)===t(c)._id}),d(L,m)}),o(C),o(D),o(w),d(x,w)},j=x=>{var w=na();d(x,w)};g(S,x=>{t($).length>0?x(k):x(j,!1)})}d(b,f)};g(i,b=>{t(ae)?b(s):b(v,!1)},!0)}d(e,r)};g(ir,e=>{t(re)?e(sr):e(nr,!1)})}o(Ve);var Ye=n(Ve,2),ht=l(Ye),Be=l(ht),Ce=l(Be),fe=l(Ce);fe.__click=Mt;var qe=l(fe),wt=l(qe);{var dr=e=>{var r=ca();d(e,r)};g(wt,e=>{dt(t(G))&&e(dr)})}var cr=n(wt,2);{var vr=e=>{var r=pe("Loading models...");d(e,r)},ur=e=>{var r=Re(),i=ye(r);{var s=b=>{var f=pe();E(y=>R(f,y),[()=>it(t(G))]),d(b,f)},v=b=>{var f=pe("Select model");d(b,f)};g(i,b=>{t(G)?b(s):b(v,!1)},!0)}d(e,r)};g(cr,e=>{t(te)?e(vr):e(ur,!1)})}o(qe);var kt=n(qe,2),It=l(kt);{var pr=e=>{var r=va();d(e,r)};g(It,e=>{t(G)&&nt(t(G))&&e(pr)})}var gr=n(It,2);{var br=e=>{var r=ua();d(e,r)};g(gr,e=>{t(G)&&st(t(G))&&e(br)})}o(kt),o(fe);var fr=n(fe,2);{var mr=e=>{var r=ma();Ge(r,21,()=>t(we),i=>i.id,(i,s)=>{var v=fa();v.__click=()=>Ft(t(s).id);var b=l(v);{var f=c=>{var m=pa();d(c,m)};g(b,c=>{dt(t(s).id)&&c(f)})}var y=n(b,2),P=l(y),S=l(P,!0);o(P);var k=n(P,2),j=l(k,!0);o(k),o(y);var x=n(y,2),w=l(x);{var D=c=>{var m=ga();d(c,m)};g(w,c=>{nt(t(s).id)&&c(D)})}var C=n(w,2);{var L=c=>{var m=ba();d(c,m)};g(C,c=>{st(t(s).id)&&c(L)})}o(x),o(v),E((c,m)=>{R(S,c),R(j,m)},[()=>it(t(s).id),()=>ce(t(s).id)]),d(i,v)}),o(r),d(e,r)};g(fr,e=>{t(B)&&e(mr)})}o(Ce),$e(Ce,e=>a(ke,e),()=>t(ke));var Pt=n(Ce,2);{var _r=e=>{var r=_a(),i=l(r),s=n(i,2);s.__click=$t;var v=l(s);Ae(v,{class:"text-sm"}),o(s),o(r),E(()=>V(i,"src",t(Y))),d(e,r)},xr=e=>{var r=xa();r.__click=Xt;var i=l(r);ea(i,{class:"text-xl"}),o(r),E(()=>r.disabled=t(U)),d(e,r)};g(Pt,e=>{t(Y)?e(_r):e(xr,!1)})}var Qe=n(Pt,2);Qe.__change=Zt,$e(Qe,e=>a(Ke,e),()=>t(Ke)),o(Be);var Le=n(Be,2),ve=l(Le);Jr(ve),ve.__keydown=e=>{e.key==="Enter"&&(e.shiftKey||(e.preventDefault(),gt()))};var me=n(ve,2);me.__click=Jt;var yr=l(me);{let e=Vr(()=>"text-lg transition-transform "+(t(W)?"-rotate-90":"rotate-90"));ta(yr,{get class(){return t(e)}})}o(me);var hr=n(me,2);{var wr=e=>{var r=wa(),i=l(r);{var s=b=>{var f=ya();d(b,f)},v=b=>{var f=Re(),y=ye(f);Ge(y,16,()=>t(le),P=>P,(P,S)=>{var k=ha();k.__click=()=>Vt(S);var j=l(k),x=l(j,!0);o(j),o(k),E(()=>R(x,S)),d(P,k)}),d(b,f)};g(i,b=>{t(le).length===0?b(s):b(v,!1)})}o(r),d(e,r)};g(hr,e=>{t(W)&&e(wr)})}o(Le),$e(Le,e=>a(Ie,e),()=>t(Ie));var Xe=n(Le,2),_e=l(Xe);_e.__click=gt;var kr=l(_e);{var Ir=e=>{var r=ka(),i=l(r);ge(i,{}),M(),o(r),d(e,r)},Pr=e=>{var r=pe("Generate Image");d(e,r)};g(kr,e=>{t(U)?e(Ir):e(Pr,!1)})}o(_e);var xe=n(_e,2);xe.__click=Bt;var Sr=l(xe);Ct(Sr,{classNames:"h-5 w-5"}),o(xe);var Er=n(xe,2);{var jr=e=>{var r=Ia();r.__click=()=>a(ne,!0);var i=l(r);Lt(i,{classNames:"h-5 w-5"}),o(r),E(()=>r.disabled=t(U)),d(e,r)};g(Er,e=>{At().data.isAdmin&&e(jr)})}o(Xe);var St=n(Xe,2);{var Tr=e=>{var r=Pa(),i=l(r,!0);o(r),E(()=>R(i,t(Z))),d(e,r)};g(St,e=>{t(Z)&&e(Tr)})}var Cr=n(St,2);{var Lr=e=>{var r=Sa(),i=l(r,!0);o(r),E(()=>R(i,t(N))),d(e,r)};g(Cr,e=>{t(N)&&e(Lr)})}o(ht),o(Ye);var Et=n(Ye,2);{var Rr=e=>{var r=Ta();r.__keydown=_=>{_.key==="Escape"&&a(ne,!1)},r.__click=()=>a(ne,!1);var i=l(r);i.__click=_=>_.stopPropagation(),i.__keydown=_=>_.stopPropagation();var s=l(i),v=l(s),b=l(v);Lt(b,{classNames:"h-5 w-5 text-blue-400"}),M(2),o(v);var f=n(v,2);f.__click=()=>a(ne,!1);var y=l(f);Ae(y,{class:"text-xl"}),o(f),o(s);var P=n(s,2),S=n(l(P),2),k=l(S);Yr(k);var j=n(k,2);j.__click=()=>a(Pe,!t(Pe));var x=l(j,!0);o(j),o(S);var w=n(S,2);{var D=_=>{var T=Ea(),O=l(T,!0);o(T),E(()=>R(O,t(Se))),d(_,T)};g(w,_=>{t(Se)&&_(D)})}var C=n(w,2);{var L=_=>{var T=ja();d(_,T)};g(C,_=>{t(Ee)&&_(L)})}var c=n(C,2),m=l(c);m.__click=()=>a(ne,!1);var h=n(m,2);h.__click=Kt,o(c),o(P),o(i),o(r),E(()=>{V(k,"type",t(Pe)?"text":"password"),k.disabled=t(de),j.disabled=t(de),R(x,t(Pe)?"Hide":"Show"),m.disabled=t(de),h.disabled=t(de)}),Tt(k,()=>t(Me),_=>a(Me,_)),d(e,r)};g(Et,e=>{t(ne)&&e(Rr)})}var jt=n(Et,2);{var Gr=e=>{var r=La();r.__click=je,r.__keydown=tr;var i=l(r);i.__click=h=>h.stopPropagation(),i.__keydown=h=>h.stopPropagation();var s=l(i),v=l(s),b=l(v,!0);o(v);var f=n(v,2),y=l(f);y.__click=()=>t(I)&&er(t(I).url);var P=l(y);et(P,{class:"text-lg"}),M(),o(y);var S=n(y,2);S.__click=()=>t(I)&&vt(t(I).url);var k=l(S);et(k,{class:"text-lg"}),M(),o(S);var j=n(S,2),x=l(j);Zr(x,{class:"text-lg"}),M(),o(j);var w=n(j,2);{var D=h=>{var _=Ca();_.__click=()=>t(I)&&bt(t(I));var T=l(_);{var O=K=>{ge(K,{})},Q=K=>{Rt(K,{class:"text-lg"})};g(T,K=>{var ee;t(oe)===((ee=t(I))==null?void 0:ee._id)?K(O):K(Q,!1)})}M(),o(_),E(()=>{var K;return _.disabled=t(oe)===((K=t(I))==null?void 0:K._id)}),d(h,_)};g(w,h=>{t(I).modelUsed!=="starter"&&h(D)})}var C=n(w,2);C.__click=je;var L=l(C);Ae(L,{class:"text-xl"}),o(C),o(f),o(s);var c=n(s,2),m=l(c);o(c),o(i),o(r),E(()=>{R(b,t(I).prompt),V(j,"href",t(I).url),V(m,"src",t(I).url),V(m,"alt",t(I).prompt)}),d(e,r)};g(jt,e=>{t(I)&&e(Gr)})}var Ur=n(jt,2);{var Ar=e=>{var r=Ua(),i=l(r),s=l(i),v=l(s),b=l(v);Ct(b,{classNames:"h-5 w-5 text-purple-400"}),M(2),o(v);var f=n(v,2);f.__click=Fe;var y=l(f);Ae(y,{class:"text-xl"}),o(f),o(s);var P=n(s,2),S=l(P),k=n(l(S),2),j=l(k,!0);o(k),o(S);var x=n(S,2),w=n(l(x),2),D=l(w);{var C=T=>{var O=Ra(),Q=l(O,!0);o(O),E(()=>R(Q,t(ie))),d(T,O)},L=T=>{var O=Re(),Q=ye(O);{var K=H=>{var X=Ga(),ue=l(X);ge(ue,{}),M(2),o(X),d(H,X)},ee=H=>{var X=pe();E(()=>R(X,t(se))),d(H,X)};g(Q,H=>{t(q)&&!t(se)?H(K):H(ee,!1)},!0)}d(T,O)};g(D,T=>{t(ie)?T(C):T(L,!1)})}o(w),o(x);var c=n(x,2),m=l(c);m.__click=Fe;var h=n(m,2);h.__click=ut;var _=n(h,2);_.__click=qt,o(c),o(P),o(i),o(r),E(()=>{R(j,t(ot)),m.disabled=t(q),h.disabled=t(q),_.disabled=!t(J)||t(q)}),d(e,r)};g(Ur,e=>{t(He)&&e(Ar)})}o(yt),o(xt),o(ze),E(()=>{Te.disabled=t(re),fe.disabled=t(U)||t(te),Qe.disabled=t(U),ve.disabled=t(U),me.disabled=t(U),_e.disabled=t(U),xe.disabled=t(U)}),Fr("paste",ve,Yt),Tt(ve,()=>t(F),e=>a(F,e)),d(Gt,ze),Wr(),Ot()}Hr(["click","change","keydown"]);export{ro as component};
