import"../chunks/Bzak7iHL.js";import{d as xr,o as _r,s as S,b as yr}from"../chunks/C8st8IW6.js";import{p as wr,e as c,g as qe,f as p,d as re,c as a,s as i,t as _,i as t,a as v,b as jr,h as l,u as kr,r as o,j as G,ap as Pr,aq as wt,k as Pe}from"../chunks/jB7C_rnE.js";import{i as y}from"../chunks/Bp5l5fH2.js";import{e as de}from"../chunks/B_9GqA3w.js";import{d as Ie,r as jt,b as ne}from"../chunks/CgC7qgJv.js";import{a as kt,b as Ir}from"../chunks/CeoL9yOQ.js";import{b as Pt}from"../chunks/DUPt1t1G.js";import{s as Sr,a as Er}from"../chunks/D-VCVtW5.js";import{p as Rr}from"../chunks/zVwYyC33.js";import{u as Ar,h as It}from"../chunks/DkC0pIUA.js";import{I as Se,D as Cr}from"../chunks/rVTgO4vC.js";import{I as Tr}from"../chunks/CAARBg-q.js";import{I as St}from"../chunks/wrqN8MQ3.js";import{I as Et}from"../chunks/ByPW2F0P.js";import{P as Be}from"../chunks/DnJmhlQ7.js";import{U as Gr}from"../chunks/IYyS0das.js";import{C as Nr}from"../chunks/Ce7v3j9V.js";import{C as Lr}from"../chunks/DoOTwRJy.js";import{C as Qe}from"../chunks/DydEdpK0.js";import{C as Or}from"../chunks/DYW_nCQ1.js";var Dr=p('<option class="svelte-rj6o1h"> </option>'),Hr=p('<option class="svelte-rj6o1h"> </option>'),Ur=p('<option class="svelte-rj6o1h"> </option>'),Vr=p('<img alt="Reference" class="h-full w-full object-cover svelte-rj6o1h"/> <button type="button" class="absolute right-2 top-2 rounded-lg bg-red-500 px-2 py-1 text-xs font-bold text-white shadow-lg transition-all hover:scale-110 hover:bg-red-600 svelte-rj6o1h">√ó</button>',1),Fr=p('<button type="button" class="flex h-full w-full flex-col items-center justify-center gap-1 text-gray-400 transition-colors hover:text-blue-400 svelte-rj6o1h"><!> <span class="text-xs font-medium svelte-rj6o1h">Upload</span></button>'),Kr=p('<div class="flex-shrink-0 svelte-rj6o1h"><div class="relative h-24 w-24 overflow-hidden rounded-xl border-2 border-dashed border-gray-600 bg-gray-800 transition-all hover:border-blue-400 svelte-rj6o1h"><!></div> <input type="file" accept="image/*" class="hidden svelte-rj6o1h"/></div>'),zr=p('<div class="flex items-center gap-2 py-2 svelte-rj6o1h"><input type="checkbox" id="allow-adult" class="h-4 w-4 rounded border-gray-600 bg-gray-700 text-blue-600 focus:ring-blue-500 focus:ring-offset-gray-900 svelte-rj6o1h"/> <label for="allow-adult" class="text-xs font-medium text-gray-300 select-none svelte-rj6o1h">Allow Adult Content (Warning: May generate NSFW content)</label></div>'),Mr=p('<div class="px-3 py-2 text-sm text-gray-400 svelte-rj6o1h">No saved prompts yet</div>'),Jr=p('<button type="button" class="w-full px-3 py-2 text-left text-sm text-white hover:bg-gray-700 svelte-rj6o1h"><span class="block truncate svelte-rj6o1h"> </span></button>'),Wr=p('<div class="absolute bottom-full right-0 z-50 mb-2 max-h-56 w-full overflow-auto rounded-lg border border-gray-700 bg-gray-800 shadow-xl svelte-rj6o1h" role="listbox"><!></div>'),Yr=p('<button type="button" class="flex h-12 w-12 flex-none items-center justify-center rounded-lg border-2 border-gray-600 bg-gray-700 text-gray-200 hover:bg-gray-600 disabled:cursor-not-allowed disabled:opacity-50 svelte-rj6o1h" aria-label="Set Google Studio API key" title="Set Google Studio API key"><!></button>'),qr=p('<div class="animate-shake rounded-lg border border-red-500/30 bg-red-900/30 px-4 py-2 text-sm text-red-400 svelte-rj6o1h"> </div>'),Br=p('<span class="flex items-center justify-center gap-2 svelte-rj6o1h"><!> Generating...</span>'),Qr=p('<span class="flex items-center justify-center gap-2 svelte-rj6o1h"><!> Generate Video</span>'),Xr=p('<p class="flex items-center gap-1 text-sm text-green-400 svelte-rj6o1h"><!> </p>'),Zr=p('<div class="fixed inset-0 z-50 relative flex items-center justify-center bg-black/90 p-4 backdrop-blur-sm svelte-rj6o1h" role="dialog" aria-modal="true" aria-labelledby="preview-title" tabindex="-1"><button type="button" class="absolute inset-0 cursor-default bg-transparent svelte-rj6o1h" aria-label="Close preview" tabindex="-1"></button> <div class="relative z-10 w-full max-w-5xl overflow-hidden rounded-2xl bg-gray-900 shadow-2xl svelte-rj6o1h" role="document"><div class="relative svelte-rj6o1h"><video controls autoplay class="max-h-[70vh] w-full bg-black svelte-rj6o1h"><track kind="captions" label="No captions available" class="svelte-rj6o1h"/></video> <button type="button" class="absolute right-4 top-4 rounded-full bg-black/60 p-2 text-white transition-colors hover:bg-black/80 svelte-rj6o1h" aria-label="Close preview"><!></button></div> <div class="space-y-4 p-6 svelte-rj6o1h"><div class="flex items-start justify-between gap-4 svelte-rj6o1h"><div class="flex-1 svelte-rj6o1h"><p id="preview-title" class="mb-1 text-sm font-medium text-gray-400 svelte-rj6o1h">Prompt:</p> <p class="text-white svelte-rj6o1h"> </p></div> <div class="flex gap-2 svelte-rj6o1h"><button type="button" class="inline-flex items-center gap-2 rounded-lg border-2 border-gray-700 px-4 py-2 text-sm font-medium text-white transition-all hover:bg-gray-800 svelte-rj6o1h"><!> Copy</button> <a download="veo-video.mp4" class="inline-flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-all hover:bg-blue-700 svelte-rj6o1h"><!> Download</a></div></div> <!></div></div></div>',2),$r=p('<div class="flex h-64 items-center justify-center svelte-rj6o1h"><div class="space-y-3 text-center svelte-rj6o1h"><!> <p class="text-gray-400 svelte-rj6o1h">Loading videos...</p></div></div>'),eo=p('<div class="rounded-xl border border-red-500/30 bg-red-900/20 p-6 svelte-rj6o1h"><p class="text-red-400 svelte-rj6o1h"> </p></div>'),to=p('<div class="flex h-64 items-center justify-center svelte-rj6o1h"><div class="space-y-3 text-center svelte-rj6o1h"><div class="text-6xl svelte-rj6o1h">üé¨</div> <p class="font-medium text-gray-400 svelte-rj6o1h">No videos yet. Create your first one!</p></div></div>'),ro=p('<button type="button" class="group relative overflow-hidden rounded-xl border-2 border-gray-700 bg-gray-800 transition-all hover:scale-[1.02] hover:border-blue-500 hover:shadow-xl hover:shadow-blue-500/20 svelte-rj6o1h"><div class="relative aspect-video w-full overflow-hidden bg-black svelte-rj6o1h"><video class="h-full w-full object-cover transition-opacity group-hover:opacity-80 svelte-rj6o1h" preload="metadata"><track kind="captions" label="No captions available" class="svelte-rj6o1h"/></video> <div class="absolute inset-0 flex items-center justify-center bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 transition-opacity group-hover:opacity-100 svelte-rj6o1h"><div class="scale-90 transform rounded-full bg-blue-500 p-4 transition-transform group-hover:scale-100 svelte-rj6o1h"><!></div></div> <div class="absolute left-3 top-3 flex gap-2 svelte-rj6o1h"><span class="rounded-full bg-blue-500/90 px-3 py-1 text-xs font-bold text-white backdrop-blur-sm svelte-rj6o1h"> </span></div></div> <div class="p-4 svelte-rj6o1h"><p class="line-clamp-2 text-left text-sm font-medium text-gray-300 svelte-rj6o1h"> </p> <p class="mt-2 text-left text-xs text-gray-500 svelte-rj6o1h"> </p></div></button>',2),oo=p('<div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 svelte-rj6o1h"></div>'),ao=p('<p class="text-sm text-red-400 svelte-rj6o1h"> </p>'),lo=p('<p class="text-sm text-green-400 svelte-rj6o1h">Saved</p>'),so=p('<div class="fixed inset-0 z-[10000] relative flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm svelte-rj6o1h" role="dialog" aria-modal="true" aria-labelledby="google-key-title" tabindex="-1"><button type="button" class="absolute inset-0 cursor-default bg-transparent svelte-rj6o1h" aria-label="Close dialog" tabindex="-1"></button> <div class="relative z-10 w-full max-w-xl overflow-hidden rounded-2xl border border-white/10 bg-gray-900 shadow-2xl svelte-rj6o1h" role="document"><div class="flex items-center justify-between border-b border-white/10 px-4 py-3 svelte-rj6o1h"><div class="flex items-center gap-2 svelte-rj6o1h"><!> <p class="text-sm font-semibold text-white svelte-rj6o1h" id="google-key-title">Google Studio API Key</p></div> <button type="button" class="rounded-lg p-2 text-gray-400 hover:bg-gray-800 hover:text-white svelte-rj6o1h" aria-label="Close"><!></button></div> <div class="space-y-3 p-4 svelte-rj6o1h"><a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noreferrer" class="inline-flex text-sm text-blue-400 underline decoration-blue-400/40 underline-offset-2 hover:decoration-blue-400 svelte-rj6o1h">Open Google AI Studio</a> <div class="flex items-center gap-2 svelte-rj6o1h"><input placeholder="AIza..." class="w-full rounded-xl border border-white/10 bg-gray-800/50 px-4 py-3 text-sm text-white placeholder:text-gray-500 svelte-rj6o1h"/> <button type="button" class="rounded-lg border border-gray-600 px-3 py-2 text-sm text-gray-200 hover:bg-gray-800 svelte-rj6o1h"> </button></div> <!> <!> <div class="flex items-center justify-end gap-2 svelte-rj6o1h"><button type="button" class="rounded-lg border border-gray-600 px-3 py-2 text-sm text-gray-200 hover:bg-gray-800 disabled:opacity-50 svelte-rj6o1h">Cancel</button> <button type="button" class="rounded-lg bg-blue-600 px-3 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50 svelte-rj6o1h">Save</button></div></div></div></div>'),io=p('<p class="text-sm text-red-400 svelte-rj6o1h"> </p>'),no=p('<div class="flex items-center gap-2 text-gray-400 svelte-rj6o1h"><!> <span class="svelte-rj6o1h">Enhancing...</span></div>'),vo=p('<div class="fixed inset-0 z-[10000] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm svelte-rj6o1h" role="dialog" aria-modal="true" aria-labelledby="enhancer-title" tabindex="-1"><div class="w-full max-w-3xl overflow-hidden rounded-xl border border-gray-700 bg-gray-900 shadow-2xl svelte-rj6o1h" role="document"><div class="flex items-center justify-between border-b border-gray-800 px-4 py-3 svelte-rj6o1h"><div class="flex items-center gap-2 svelte-rj6o1h"><!> <p id="enhancer-title" class="text-sm font-semibold text-white svelte-rj6o1h">Enhance Prompt with AI</p></div> <button type="button" class="rounded-lg p-2 text-gray-400 hover:bg-gray-800 hover:text-gray-200 svelte-rj6o1h" aria-label="Close"><!></button></div> <div class="space-y-3 p-4 svelte-rj6o1h"><div class="svelte-rj6o1h"><p class="mb-1 text-xs font-medium text-gray-400 svelte-rj6o1h">Original Prompt</p> <div class="rounded-lg border border-gray-700 bg-gray-800 p-3 text-sm text-white svelte-rj6o1h"> </div></div> <div class="svelte-rj6o1h"><p class="mb-1 text-xs font-medium text-gray-400 svelte-rj6o1h">Enhanced Prompt (English)</p> <div class="min-h-[120px] rounded-lg border border-gray-700 bg-gray-800 p-3 text-sm text-white svelte-rj6o1h"><!></div></div> <div class="flex flex-wrap items-center justify-end gap-2 pt-1 svelte-rj6o1h"><button type="button" class="rounded-lg border border-gray-600 px-3 py-2 text-sm font-medium text-gray-300 hover:bg-gray-800 disabled:cursor-not-allowed disabled:opacity-50 svelte-rj6o1h">Cancel</button> <button type="button" class="rounded-lg border border-gray-600 px-3 py-2 text-sm font-medium text-gray-300 hover:bg-gray-800 disabled:cursor-not-allowed disabled:opacity-50 svelte-rj6o1h">Regenerate</button> <button type="button" class="rounded-lg bg-blue-600 px-3 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50 svelte-rj6o1h">Use This</button></div></div></div></div>'),co=p('<div class="google-videos-page flex h-screen max-h-screen flex-col overflow-hidden svelte-rj6o1h"><div class="hero-section relative flex-shrink-0 svelte-rj6o1h"><video autoplay loop playsinline="" class="absolute inset-0 h-full w-full object-cover svelte-rj6o1h" src="/google_studio_page/1.mp4"><track kind="captions" label="No captions available" class="svelte-rj6o1h"/></video> <div class="absolute inset-0 bg-gradient-to-b from-black/60 via-black/40 to-black/70 svelte-rj6o1h"></div> <div class="relative z-10 px-6 py-12 svelte-rj6o1h"><div class="mx-auto max-w-7xl svelte-rj6o1h"><div class="mb-6 flex items-center gap-4 svelte-rj6o1h"><div class="rounded-xl border border-white/20 bg-white/10 p-3 shadow-2xl backdrop-blur-xl svelte-rj6o1h"><!></div> <div class="svelte-rj6o1h"><h1 class="mb-2 text-4xl font-bold text-white drop-shadow-2xl svelte-rj6o1h">Veo Studio</h1> <p class="text-lg text-white/90 drop-shadow-lg svelte-rj6o1h">Create stunning AI-powered videos with Veo 3.1</p></div></div></div></div></div> <div class="flex-1 overflow-y-auto bg-gradient-to-b from-gray-900 via-gray-900 to-black svelte-rj6o1h"><div class="mx-auto max-w-7xl px-6 py-8 svelte-rj6o1h"><div class="mb-8 rounded-2xl border border-gray-800/60 bg-gray-900/80 p-6 shadow-2xl backdrop-blur-xl svelte-rj6o1h"><h2 class="mb-6 flex items-center gap-2 text-xl font-bold text-white svelte-rj6o1h"><!> Generate New Video</h2> <div class="mb-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-4 svelte-rj6o1h"><div class="space-y-2 svelte-rj6o1h"><label for="mode-select" class="text-sm font-medium text-gray-300 svelte-rj6o1h">Mode</label> <select id="mode-select" class="w-full rounded-xl border-2 border-gray-700 bg-gray-800 px-4 py-3 text-sm font-medium text-white shadow-lg transition-all focus:border-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-500/20 svelte-rj6o1h"><option class="svelte-rj6o1h">üìù Text to Video</option><option class="svelte-rj6o1h">üñºÔ∏è Image to Video</option></select></div> <div class="space-y-2 svelte-rj6o1h"><label for="model-select" class="text-sm font-medium text-gray-300 svelte-rj6o1h">Model</label> <select id="model-select" class="w-full rounded-xl border-2 border-gray-700 bg-gray-800 px-4 py-3 text-sm font-medium text-white shadow-lg transition-all focus:border-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-500/20 svelte-rj6o1h"></select></div> <div class="space-y-2 svelte-rj6o1h"><label for="aspect-ratio-select" class="text-sm font-medium text-gray-300 svelte-rj6o1h">Aspect Ratio</label> <select id="aspect-ratio-select" class="w-full rounded-xl border-2 border-gray-700 bg-gray-800 px-4 py-3 text-sm font-medium text-white shadow-lg transition-all focus:border-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-500/20 svelte-rj6o1h"></select></div> <div class="space-y-2 svelte-rj6o1h"><label for="resolution-select" class="text-sm font-medium text-gray-300 svelte-rj6o1h">Resolution</label> <select id="resolution-select" class="w-full rounded-xl border-2 border-gray-700 bg-gray-800 px-4 py-3 text-sm font-medium text-white shadow-lg transition-all focus:border-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-500/20 svelte-rj6o1h"></select></div></div> <div class="mb-6 flex gap-4 svelte-rj6o1h"><!> <!> <div class="min-w-0 flex-1 space-y-3 svelte-rj6o1h"><div class="flex items-center gap-2 svelte-rj6o1h"><div class="relative min-w-0 flex-1 svelte-rj6o1h"><textarea rows="3" placeholder="Describe your video in detail..." class="w-full resize-none rounded-xl border-2 border-gray-700 bg-gray-800 px-4 py-3 pr-12 text-white shadow-lg transition-all placeholder:text-gray-500 focus:border-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-500/20 svelte-rj6o1h"></textarea> <button type="button" class="absolute right-2 top-2 flex h-9 w-9 items-center justify-center rounded-md border border-gray-600 bg-gray-700 text-gray-300 shadow-sm hover:bg-gray-600 disabled:cursor-not-allowed disabled:opacity-50 svelte-rj6o1h" aria-label="Prompt History" title="Last 5 prompts"><!></button> <!></div> <button type="button" class="flex h-12 w-12 flex-none items-center justify-center rounded-lg border-2 border-gray-600 bg-gray-700 text-gray-300 hover:bg-gray-600 disabled:cursor-not-allowed disabled:opacity-50 svelte-rj6o1h" aria-label="Enhance Prompt" title="Enhance Prompt with AI"><!></button> <!></div> <!> <button type="button" class="w-full rounded-xl bg-blue-600 px-6 py-3.5 text-sm font-bold text-white shadow-lg shadow-blue-500/30 transition-all hover:scale-[1.02] hover:bg-blue-700 hover:shadow-xl hover:shadow-blue-500/40 disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:scale-100 svelte-rj6o1h"><!></button></div></div></div> <!> <div class="space-y-6 svelte-rj6o1h"><div class="flex items-center justify-between svelte-rj6o1h"><h2 class="flex items-center gap-2 text-2xl font-bold text-white svelte-rj6o1h">üìö Generated Videos</h2> <button type="button" class="rounded-lg border-2 border-gray-700 bg-gray-800 px-4 py-2 text-sm font-medium text-white transition-all hover:bg-gray-700 svelte-rj6o1h"><!></button></div> <!></div></div></div></div> <!> <!>',3);function Go(Rt,At){wr(At,!0);const Ct=()=>Er(Rr,"$page",Tt),[Tt,Gt]=Sr(),Xe=Ar(),Ze=[{id:"veo-3.1-generate-preview",label:"Veo 3.1 Preview"},{id:"veo-3.1-fast-generate-preview",label:"Veo 3.1 Preview Fast"}],Nt=[{id:"16:9",label:"16:9 (Landscape)"},{id:"9:16",label:"9:16 (Portrait)"}],Lt=[{id:"720",label:"720p HD"},{id:"1080",label:"1080p Full HD"}];let U=c("text-to-video"),ve=c(qe(Ze[0].id)),Ee=c("16:9"),Re=c("1080"),O=c(""),k=c(!1),W=c(null),ce=c(null),z=c(null),Ae=c(null),oe=c(qe([])),B=c(!1),ue=c(null),Ce=c(null),Te=c(!1),Q=c(null),C=c(null),Ge=c(!1),M=c(!1),X=c(null),V=c(""),Z=c(""),$e=c(""),A=null,Y=c(!1),pe=c(null),$=c(qe([]));const et="google_videos_prompt_history";let ee=c(!1),Ne=c(""),be=c(!1),te=c(!1),ge=c(null),fe=c(!1);async function Ot(){l(te,!0),l(ge,null),l(fe,!1);try{const e=await fetch(`${yr}/api/config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({GEMINI_API_KEY:t(Ne)})});if(!e.ok){const r=await e.text().catch(()=>"");throw new Error(r||`HTTP ${e.status}`)}l(fe,!0),setTimeout(()=>l(fe,!1),2e3)}catch(e){l(ge,String((e==null?void 0:e.message)??e),!0)}finally{l(te,!1)}}async function Dt(e){if(!e.type.startsWith("image/")){l(W,"Please select an image file");return}l(W,null),t(z)&&URL.revokeObjectURL(t(z)),l(z,URL.createObjectURL(e),!0);const r=await new Promise((s,d)=>{const n=new FileReader;n.onload=()=>s(String(n.result||"")),n.onerror=()=>d(n.error),n.readAsDataURL(e)});l(ce,{data:r,mimeType:e.type},!0)}function Ht(){t(z)&&URL.revokeObjectURL(t(z)),l(z,null),l(ce,null)}function Ut(){var e;(e=t(Ae))==null||e.click()}async function Vt(e){var d;const r=e.currentTarget,s=(d=r==null?void 0:r.files)==null?void 0:d[0];s&&await Dt(s)}async function Ft(e){try{await navigator.clipboard.writeText(e),l(Q,"ÿ™ŸÖ ŸÜÿ≥ÿÆ ÿßŸÑÿ±ÿßÿ®ÿ∑"),setTimeout(()=>{l(Q,null)},1500)}catch{l(Q,"ŸÅÿ¥ŸÑ ŸÜÿ≥ÿÆ ÿßŸÑÿ±ÿßÿ®ÿ∑"),setTimeout(()=>{l(Q,null)},2e3)}}function Kt(){if(!(typeof localStorage>"u"))try{const e=localStorage.getItem(et),r=e?JSON.parse(e):[];Array.isArray(r)&&l($,r.map(s=>String(s)).filter(Boolean).slice(0,5),!0)}catch{l($,[],!0)}}function zt(e){if(l($,e,!0),!(typeof localStorage>"u"))try{localStorage.setItem(et,JSON.stringify(e))}catch{}}function Mt(e){const r=String(e||"").trim();if(!r)return;const s=[r,...t($).filter(d=>d!==r)].slice(0,5);zt(s)}function Jt(){l(Y,!t(Y))}function Wt(e){l(O,e,!0),l(Y,!1)}function Yt(){l($e,t(O),!0),l(Ge,!0),l(V,""),l(Z,""),l(X,null),tt()}function he(){l(Ge,!1),l(M,!1),l(X,null),l(V,""),l(Z,""),A&&(clearInterval(A),A=null)}async function tt(){if(!t(M)){l(M,!0),l(X,null),l(V,""),l(Z,""),A&&(clearInterval(A),A=null);try{const e=await fetch("/api/deepseek/prompt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:t(O)})});if(!e.ok){const n=await e.text().catch(()=>"");throw new Error(n||`HTTP ${e.status}`)}const r=await e.json(),s=String((r==null?void 0:r.prompt)??"").trim();if(!s)throw new Error("Empty prompt");l(V,s,!0);let d=0;A=setInterval(()=>{d+=1,l(Z,t(V).slice(0,d),!0),d>=t(V).length&&A&&(clearInterval(A),A=null)},12)}catch(e){l(X,String((e==null?void 0:e.message)??e),!0)}finally{l(M,!1)}}}function qt(){t(V)&&(l(O,t(V),!0),he())}function rt(e){const r=e.target;t(Y)&&t(pe)&&r&&!t(pe).contains(r)&&l(Y,!1)}async function Le(){if(!t(B)){l(B,!0),l(ue,null);try{const e=await Xe.videos.get({query:{limit:"50"}}),r=It(e);l(oe,(r.videos||[]).map(s=>({...s,_id:s._id.toString(),createdAt:s.createdAt})),!0)}catch(e){l(ue,String(e),!0)}finally{l(B,!1)}}}async function ot(){var e;if(!t(k)&&t(O).trim()){if(t(U)==="image-to-video"&&!t(ce)){l(W,"Ÿäÿ±ÿ¨Ÿâ ÿ•ÿ±ŸÅÿßŸÇ ÿµŸàÿ±ÿ© ŸÑŸÑŸÄ Image to Video");return}Mt(t(O).trim()),l(k,!0),l(W,null);try{const r=await Xe.videos.google.generate.post({prompt:t(O).trim(),model:t(ve),mode:t(U),aspectRatio:t(Ee),resolution:t(Re),referenceImage:t(U)==="image-to-video"?t(ce)??void 0:void 0,allowAdult:t(U)==="image-to-video"?t(Te):void 0}),s=It(r);if(!s.success||!((e=s.video)!=null&&e.url))throw new Error(s.error||"Google video generation failed");l(Ce,{_id:`local-${Date.now()}`,prompt:t(O).trim(),url:s.video.url,modelUsed:t(ve),mode:t(U),createdAt:new Date},!0),l(oe,[t(Ce),...t(oe)].slice(0,50),!0),l(C,t(Ce),!0),await Le()}catch(r){l(W,String((r==null?void 0:r.message)??r),!0)}finally{l(k,!1)}}}_r(()=>(typeof document<"u"&&(document.addEventListener("pointerdown",rt),Kt()),Le(),()=>{typeof document<"u"&&document.removeEventListener("pointerdown",rt),A&&(clearInterval(A),A=null)}));var at=co(),Oe=re(at),De=a(Oe),lt=a(De);lt.muted=!0;var st=i(lt,4),it=a(st),dt=a(it),nt=a(dt),Bt=a(nt);Tr(Bt,{classNames:"text-3xl text-white"}),o(nt),G(2),o(dt),o(it),o(st),o(De);var vt=i(De,2),ct=a(vt),He=a(ct),Ue=a(He),Qt=a(Ue);Be(Qt,{class:"text-blue-400"}),G(),o(Ue);var Ve=i(Ue,2),Fe=a(Ve),me=i(a(Fe),2),Ke=a(me);Ke.value=Ke.__value="text-to-video";var ut=i(Ke);ut.value=ut.__value="image-to-video",o(me),o(Fe);var ze=i(Fe,2),xe=i(a(ze),2);de(xe,21,()=>Ze,e=>e.id,(e,r)=>{var s=Dr(),d=a(s,!0);o(s);var n={};_(()=>{S(d,t(r).label),n!==(n=t(r).id)&&(s.value=(s.__value=t(r).id)??"")}),v(e,s)}),o(xe),o(ze);var Me=i(ze,2),_e=i(a(Me),2);de(_e,21,()=>Nt,e=>e.id,(e,r)=>{var s=Hr(),d=a(s,!0);o(s);var n={};_(()=>{S(d,t(r).label),n!==(n=t(r).id)&&(s.value=(s.__value=t(r).id)??"")}),v(e,s)}),o(_e),o(Me);var pt=i(Me,2),ye=i(a(pt),2);de(ye,21,()=>Lt,e=>e.id,(e,r)=>{var s=Ur(),d=a(s,!0);o(s);var n={};_(()=>{S(d,t(r).label),n!==(n=t(r).id)&&(s.value=(s.__value=t(r).id)??"")}),v(e,s)}),o(ye),o(pt),o(Ve);var bt=i(Ve,2),gt=a(bt);{var Xt=e=>{var r=Kr(),s=a(r),d=a(s);{var n=m=>{var f=Vr(),x=re(f),h=i(x,2);h.__click=Ht,_(()=>ne(x,"src",t(z))),v(m,f)},g=m=>{var f=Fr();f.__click=Ut;var x=a(f);Gr(x,{class:"text-2xl"}),G(2),o(f),_(()=>f.disabled=t(k)),v(m,f)};y(d,m=>{t(z)?m(n):m(g,!1)})}o(s);var b=i(s,2);b.__change=Vt,Pt(b,m=>l(Ae,m),()=>t(Ae)),o(r),_(()=>b.disabled=t(k)),v(e,r)};y(gt,e=>{t(U)==="image-to-video"&&e(Xt)})}var ft=i(gt,2);{var Zt=e=>{var r=zr(),s=a(r);jt(s),G(2),o(r),_(()=>s.disabled=t(k)),Ir(s,()=>t(Te),d=>l(Te,d)),v(e,r)};y(ft,e=>{t(U)==="image-to-video"&&e(Zt)})}var ht=i(ft,2),Je=a(ht),we=a(Je),ae=a(we);Pr(ae),ae.__keydown=e=>{e.key==="Enter"&&(e.shiftKey||(e.preventDefault(),ot()))};var le=i(ae,2);le.__click=Jt;var $t=a(le);{let e=kr(()=>"text-lg transition-transform "+(t(Y)?"-rotate-90":"rotate-90"));Or($t,{get class(){return t(e)}})}o(le);var er=i(le,2);{var tr=e=>{var r=Wr(),s=a(r);{var d=g=>{var b=Mr();v(g,b)},n=g=>{var b=Pe(),m=re(b);de(m,16,()=>t($),f=>f,(f,x)=>{var h=Jr();h.__click=()=>Wt(x);var w=a(h),P=a(w,!0);o(w),o(h),_(()=>S(P,x)),v(f,h)}),v(g,b)};y(s,g=>{t($).length===0?g(d):g(n,!1)})}o(r),v(e,r)};y(er,e=>{t(Y)&&e(tr)})}o(we),Pt(we,e=>l(pe,e),()=>t(pe));var se=i(we,2);se.__click=Yt;var rr=a(se);St(rr,{classNames:"h-5 w-5"}),o(se);var or=i(se,2);{var ar=e=>{var r=Yr();r.__click=()=>l(ee,!0);var s=a(r);Et(s,{classNames:"h-5 w-5"}),o(r),_(()=>r.disabled=t(k)),v(e,r)};y(or,e=>{Ct().data.isAdmin&&e(ar)})}o(Je);var mt=i(Je,2);{var lr=e=>{var r=qr(),s=a(r,!0);o(r),_(()=>S(s,t(W))),v(e,r)};y(mt,e=>{t(W)&&e(lr)})}var je=i(mt,2);je.__click=ot;var sr=a(je);{var ir=e=>{var r=Br(),s=a(r);Se(s,{}),G(),o(r),v(e,r)},dr=e=>{var r=Qr(),s=a(r);Be(s,{class:"text-lg"}),G(),o(r),v(e,r)};y(sr,e=>{t(k)?e(ir):e(dr,!1)})}o(je),o(ht),o(bt),o(He);var xt=i(He,2);{var nr=e=>{var r=Zr();r.__keydown=I=>{I.key==="Escape"&&l(C,null)};var s=a(r);s.__click=()=>l(C,null);var d=i(s,2);d.__click=I=>I.stopPropagation();var n=a(d),g=a(n),b=i(g,2);b.__click=()=>l(C,null);var m=a(b);Qe(m,{class:"text-xl"}),o(b),o(n);var f=i(n,2),x=a(f),h=a(x),w=i(a(h),2),P=a(w,!0);o(w),o(h);var R=i(h,2),E=a(R);E.__click=()=>t(C)&&Ft(t(C).url);var F=a(E);Nr(F,{class:"text-lg"}),G(),o(E);var T=i(E,2),D=a(T);Cr(D,{class:"text-lg"}),G(),o(T),o(R),o(x);var N=i(x,2);{var L=I=>{var u=Xr(),j=a(u);Lr(j,{});var H=i(j);o(u),_(()=>S(H,` ${t(Q)??""}`)),v(I,u)};y(N,I=>{t(Q)&&I(L)})}o(f),o(d),o(r),_(()=>{ne(g,"src",t(C).url),S(P,t(C).prompt),ne(T,"href",t(C).url)}),v(e,r)};y(xt,e=>{t(C)&&e(nr)})}var _t=i(xt,2),We=a(_t),ke=i(a(We),2);ke.__click=Le;var vr=a(ke);{var cr=e=>{Se(e,{})},ur=e=>{var r=wt("Refresh");v(e,r)};y(vr,e=>{t(B)?e(cr):e(ur,!1)})}o(ke),o(We);var pr=i(We,2);{var br=e=>{var r=$r(),s=a(r),d=a(s);Se(d,{}),G(2),o(s),o(r),v(e,r)},gr=e=>{var r=Pe(),s=re(r);{var d=g=>{var b=eo(),m=a(b),f=a(m,!0);o(m),o(b),_(()=>S(f,t(ue))),v(g,b)},n=g=>{var b=Pe(),m=re(b);{var f=h=>{var w=to();v(h,w)},x=h=>{var w=oo();de(w,21,()=>t(oe),P=>P._id,(P,R)=>{var E=ro();E.__click=()=>l(C,t(R),!0),E.__keydown=q=>{(q.key==="Enter"||q.key===" ")&&(q.preventDefault(),l(C,t(R),!0))};var F=a(E),T=a(F);T.muted=!0;var D=i(T,2),N=a(D),L=a(N);Be(L,{class:"text-2xl text-white"}),o(N),o(D);var I=i(D,2),u=a(I),j=a(u,!0);o(u),o(I),o(F);var H=i(F,2),ie=a(H),Ye=a(ie,!0);o(ie);var K=i(ie,2),J=a(K,!0);o(K),o(H),o(E),_(q=>{ne(T,"src",t(R).url),S(j,t(R).mode==="text-to-video"?"Text":"Image"),S(Ye,t(R).prompt),S(J,q)},[()=>new Date(t(R).createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]),v(P,E)}),o(w),v(h,w)};y(m,h=>{t(oe).length===0?h(f):h(x,!1)},!0)}v(g,b)};y(s,g=>{t(ue)?g(d):g(n,!1)},!0)}v(e,r)};y(pr,e=>{t(B)?e(br):e(gr,!1)})}o(_t),o(ct),o(vt),o(Oe);var yt=i(Oe,2);{var fr=e=>{var r=so();r.__keydown=u=>{u.key==="Escape"&&l(ee,!1)};var s=a(r);s.__click=()=>l(ee,!1);var d=i(s,2);d.__click=u=>u.stopPropagation();var n=a(d),g=a(n),b=a(g);Et(b,{classNames:"h-5 w-5 text-blue-400"}),G(2),o(g);var m=i(g,2);m.__click=()=>l(ee,!1);var f=a(m);Qe(f,{class:"text-xl"}),o(m),o(n);var x=i(n,2),h=i(a(x),2),w=a(h);jt(w);var P=i(w,2);P.__click=()=>l(be,!t(be));var R=a(P,!0);o(P),o(h);var E=i(h,2);{var F=u=>{var j=ao(),H=a(j,!0);o(j),_(()=>S(H,t(ge))),v(u,j)};y(E,u=>{t(ge)&&u(F)})}var T=i(E,2);{var D=u=>{var j=lo();v(u,j)};y(T,u=>{t(fe)&&u(D)})}var N=i(T,2),L=a(N);L.__click=()=>l(ee,!1);var I=i(L,2);I.__click=Ot,o(N),o(x),o(d),o(r),_(()=>{ne(w,"type",t(be)?"text":"password"),w.disabled=t(te),P.disabled=t(te),S(R,t(be)?"Hide":"Show"),L.disabled=t(te),I.disabled=t(te)}),kt(w,()=>t(Ne),u=>l(Ne,u)),v(e,r)};y(yt,e=>{t(ee)&&e(fr)})}var hr=i(yt,2);{var mr=e=>{var r=vo();r.__keydown=u=>{u.key==="Escape"&&he()};var s=a(r),d=a(s),n=a(d),g=a(n);St(g,{classNames:"h-5 w-5 text-blue-400"}),G(2),o(n);var b=i(n,2);b.__click=he;var m=a(b);Qe(m,{class:"text-xl"}),o(b),o(d);var f=i(d,2),x=a(f),h=i(a(x),2),w=a(h,!0);o(h),o(x);var P=i(x,2),R=i(a(P),2),E=a(R);{var F=u=>{var j=io(),H=a(j,!0);o(j),_(()=>S(H,t(X))),v(u,j)},T=u=>{var j=Pe(),H=re(j);{var ie=K=>{var J=no(),q=a(J);Se(q,{}),G(2),o(J),v(K,J)},Ye=K=>{var J=wt();_(()=>S(J,t(Z))),v(K,J)};y(H,K=>{t(M)&&!t(Z)?K(ie):K(Ye,!1)},!0)}v(u,j)};y(E,u=>{t(X)?u(F):u(T,!1)})}o(R),o(P);var D=i(P,2),N=a(D);N.__click=he;var L=i(N,2);L.__click=tt;var I=i(L,2);I.__click=qt,o(D),o(f),o(s),o(r),_(()=>{S(w,t($e)),N.disabled=t(M),L.disabled=t(M),I.disabled=!t(V)||t(M)}),v(e,r)};y(hr,e=>{t(Ge)&&e(mr)})}_(()=>{me.disabled=t(k),xe.disabled=t(k),_e.disabled=t(k),ye.disabled=t(k),ae.disabled=t(k),le.disabled=t(k),se.disabled=t(k),je.disabled=t(k),ke.disabled=t(B)}),Ie(me,()=>t(U),e=>l(U,e)),Ie(xe,()=>t(ve),e=>l(ve,e)),Ie(_e,()=>t(Ee),e=>l(Ee,e)),Ie(ye,()=>t(Re),e=>l(Re,e)),kt(ae,()=>t(O),e=>l(O,e)),v(Rt,at),jr(),Gt()}xr(["click","change","keydown"]);export{Go as component};
