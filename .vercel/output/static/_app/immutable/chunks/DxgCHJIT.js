let i="system";const c=new Set;function f(e,t){for(const s of c)s({preference:e,isDark:t})}function k(e){if(c.add(e),typeof document<"u"){const t=m(),s=document.documentElement.classList.contains("dark");e({preference:t,isDark:s})}else e({preference:"system",isDark:!1});return()=>{c.delete(e)}}function u(e){const t=document.querySelector('meta[name="theme-color"]');t&&t.setAttribute("content",e?"rgb(26, 36, 50)":"rgb(249, 250, 251)")}function h(e,t){const s=document.querySelector("html");s.classList.remove("dark","stone","red","indigo");let n=!1;e==="stone"?(s.classList.add("dark","stone"),n=!0):e==="red"?(s.classList.add("dark","red"),n=!0):e==="indigo"?(s.classList.add("dark","indigo"),n=!0):(e==="dark"||e==="system"&&t)&&(s.classList.add("dark"),n=!0),u(n),f(i,n)}function m(){const e=typeof localStorage<"u"?localStorage.getItem("theme"):null;return e==="light"||e==="dark"||e==="stone"||e==="red"||e==="indigo"||e==="system"?(i=e,e):(i="system","system")}function g(e){try{localStorage.theme=e}catch{}const t=window.matchMedia("(prefers-color-scheme: dark)");i=e;const s=()=>h(e,t.matches);s();const n=()=>s(),r="__theme_mql_listener",a=window,d=a[r];if(d){try{t.removeEventListener("change",d)}catch{const o=t.removeListener;o==null||o(d)}a[r]=void 0}if(e==="system"){try{t.addEventListener("change",n)}catch{const o=t.addListener;o==null||o(n)}a[r]=n}}function y(){const e=m();let t="light";e==="light"?t="dark":e==="dark"?t="stone":e==="stone"?t="red":e==="red"?t="indigo":t="light",g(t)}export{k as a,y as b,m as g,g as s};
