var xe=Object.defineProperty;var ke=(e,t,r)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ne=(e,t,r)=>ke(e,typeof t!="symbol"?t+"":t,r);import{b as Pe}from"./C8st8IW6.js";var q=class extends Error{constructor(e,t){super(t+""),this.status=e,this.value=t}},Te=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,Ne=/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{2}\s\d{4}\s\d{2}:\d{2}:\d{2}\sGMT(?:\+|-)\d{4}\s\([^)]+\)/,Ie=/^(?:(?:(?:(?:0?[1-9]|[12][0-9]|3[01])[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:19|20)\d{2})|(?:(?:19|20)\d{2}[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:0?[1-9]|[12][0-9]|3[01]))))(?:\s(?:1[012]|0?[1-9]):[0-5][0-9](?::[0-5][0-9])?(?:\s[AP]M)?)?$/,Ce=e=>e.trim().length!==0&&!Number.isNaN(Number(e)),Y=e=>{if(typeof e!="string")return null;let t=e.replace(/"/g,"");if(Te.test(t)||Ne.test(t)||Ie.test(t)){let r=new Date(t);if(!Number.isNaN(r.getTime()))return r}return null},Ve=e=>{let t=e.charCodeAt(0),r=e.charCodeAt(e.length-1);return t===123&&r===125||t===91&&r===93},De=e=>JSON.parse(e,(t,r)=>Y(r)||r),D=e=>{if(!e)return e;if(Ce(e))return+e;if(e==="true")return!0;if(e==="false")return!1;let t=Y(e);if(t)return t;if(Ve(e))try{return De(e)}catch{}return e},_e=e=>{let t=e.data.toString();return t==="null"?null:D(t)},Be=class{constructor(e){ne(this,"ws");this.url=e,this.ws=new WebSocket(e)}send(e){return Array.isArray(e)?(e.forEach(t=>this.send(t)),this):(this.ws.send(typeof e=="object"?JSON.stringify(e):e.toString()),this)}on(e,t,r){return this.addEventListener(e,t,r)}off(e,t,r){return this.ws.removeEventListener(e,t,r),this}subscribe(e,t){return this.addEventListener("message",e,t)}addEventListener(e,t,r){return this.ws.addEventListener(e,n=>{if(e==="message"){let o=_e(n);t({...n,data:o})}else t(n)},r),this}removeEventListener(e,t,r){return this.off(e,t,r),this}close(){return this.ws.close(),this}},je=["get","post","put","delete","patch","options","head","connect","subscribe"],ce=["localhost","127.0.0.1","0.0.0.0"],ee=typeof FileList>"u",se=e=>ee?e instanceof Blob:e instanceof FileList||e instanceof File,Le=e=>{if(!e)return!1;for(let t in e)if(se(e[t])||Array.isArray(e[t])&&e[t].find(se))return!0;return!1},K=e=>ee?e:new Promise(t=>{let r=new FileReader;r.onload=()=>{let n=new File([r.result],e.name,{lastModified:e.lastModified,type:e.type});t(n)},r.readAsArrayBuffer(e)}),P=(e,t,r={},n={})=>{if(Array.isArray(e)){for(let o of e)if(!Array.isArray(o))n=P(o,t,r,n);else{let a=o[0];if(typeof a=="string")n[a.toLowerCase()]=o[1];else for(let[i,l]of a)n[i.toLowerCase()]=l}return n}if(!e)return n;switch(typeof e){case"function":if(e instanceof Headers)return P(e,t,r,n);let o=e(t,r);return o?P(o,t,r,n):n;case"object":if(e instanceof Headers)return e.forEach((a,i)=>{n[i.toLowerCase()]=a}),n;for(let[a,i]of Object.entries(e))n[a.toLowerCase()]=i;return n;default:return n}};async function*Me(e){let t=e.body;if(!t)return;let r=t.getReader(),n=new TextDecoder;try{for(;;){let{done:o,value:a}=await r.read();if(o)break;let i=typeof a=="string"?a:n.decode(a);i.includes(`

`)?yield*ze(i):yield D(i)}}finally{r.releaseLock()}}function*ze(e){let t=e.split(`

`);for(let r of t){if(r.indexOf(":")<=0){r&&(yield D(r));continue}let n=r.split(`
`),o={};for(let a of n){let i=a.indexOf(":");if(i>0){let l=a.slice(0,i).trim(),d=a.slice(i+1).trim();o[l]=D(d)}}yield o}}var C=(e,t,r=[],n)=>new Proxy(()=>{},{get(o,a){return C(e,t,a==="index"?r:[...r,a],n)},apply(o,a,[i,l]){if(!i||l||typeof i=="object"&&Object.keys(i).length!==1||je.includes(r.at(-1))){let d=[...r],f=d.pop(),m="/"+d.join("/"),{fetcher:O=fetch,headers:v,onRequest:s,onResponse:u,fetch:F}=t,x=f==="get"||f==="head"||f==="subscribe";v=P(v,m,l);let L=x?i==null?void 0:i.query:l==null?void 0:l.query,M="";if(L){let y=(R,A)=>{M+=(M?"&":"?")+`${encodeURIComponent(R)}=${encodeURIComponent(A)}`};for(let[R,A]of Object.entries(L)){if(Array.isArray(A)){for(let h of A)y(R,h);continue}if(A!=null){if(typeof A=="object"){y(R,JSON.stringify(A));continue}y(R,`${A}`)}}}if(f==="subscribe"){let y=e.replace(/^([^]+):\/\//,e.startsWith("https://")?"wss://":e.startsWith("http://")||ce.find(R=>e.includes(R))?"ws://":"wss://")+m+M;return new Be(y)}return(async()=>{var te,re;let y={method:f==null?void 0:f.toUpperCase(),body:i,...F,headers:v};y.headers={...v,...P(x?i==null?void 0:i.headers:l==null?void 0:l.headers,m,y)};let R=x&&typeof i=="object"?i.fetch:l==null?void 0:l.fetch;if(y={...y,...R},x&&delete y.body,s){Array.isArray(s)||(s=[s]);for(let w of s){let p=await w(m,y);typeof p=="object"&&(y={...y,...p,headers:{...y.headers,...P(p.headers,m,y)}})}}if(x&&delete y.body,Le(i)){let w=new FormData;for(let[p,g]of Object.entries(y.body)){if(Array.isArray(g)){for(let E=0;E<g.length;E++){let U=g[E];w.append(p,U instanceof File?await K(U):U)}continue}if(ee){if(Array.isArray(g))for(let E of g)w.append(p,E);else w.append(p,g);continue}if(g instanceof File){w.append(p,await K(g));continue}if(g instanceof FileList){for(let E=0;E<g.length;E++)w.append(p,await K(g[E]));continue}w.append(p,g)}y.body=w}else typeof i=="object"?(y.headers["content-type"]="application/json",y.body=JSON.stringify(i)):i!=null&&(y.headers["content-type"]="text/plain");if(x&&delete y.body,s){Array.isArray(s)||(s=[s]);for(let w of s){let p=await w(m,y);typeof p=="object"&&(y={...y,...p,headers:{...y.headers,...P(p.headers,m,y)}})}}(te=l==null?void 0:l.headers)!=null&&te["content-type"]&&(y.headers["content-type"]=l==null?void 0:l.headers["content-type"]);let A=e+m+M,h=await((n==null?void 0:n.handle(new Request(A,y)))??O(A,y)),b=null,I=null;if(u){Array.isArray(u)||(u=[u]);for(let w of u)try{let p=await w(h.clone());if(p!=null){b=p;break}}catch(p){p instanceof q?I=p:I=new q(422,p);break}}if(b!==null)return{data:b,error:I,response:h,status:h.status,headers:h.headers};switch((re=h.headers.get("Content-Type"))==null?void 0:re.split(";")[0]){case"text/event-stream":b=Me(h);break;case"application/json":b=JSON.parse(await h.text(),(p,g)=>typeof g!="string"?g:Y(g)||g);break;case"application/octet-stream":b=await h.arrayBuffer();break;case"multipart/form-data":let w=await h.formData();b={},w.forEach((p,g)=>{b[g]=p});break;default:b=await h.text().then(D)}return(h.status>=300||h.status<200)&&(I=new q(h.status,b),b=null),{data:b,error:I,response:h,status:h.status,headers:h.headers}})()}return typeof i=="object"?C(e,t,[...r,Object.values(i)[0]],n):C(e,t,r)}}),He=(e,t={})=>typeof e=="string"?(t.keepDomain||(e.includes("://")||(e=(ce.find(r=>e.includes(r))?"http://":"https://")+e),e.endsWith("/")&&(e=e.slice(0,-1))),C(e,t)):(typeof window<"u"&&console.warn("Elysia instance server found on client side, this is not recommended for security reason. Use generic type instead."),C("http://e.ly",t,[],e));class Ue{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(t,r){this.keyToValue.set(t,r),this.valueToKey.set(r,t)}getByKey(t){return this.keyToValue.get(t)}getByValue(t){return this.valueToKey.get(t)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class de{constructor(t){this.generateIdentifier=t,this.kv=new Ue}register(t,r){this.kv.getByValue(t)||(r||(r=this.generateIdentifier(t)),this.kv.set(r,t))}clear(){this.kv.clear()}getIdentifier(t){return this.kv.getByValue(t)}getValue(t){return this.kv.getByKey(t)}}class qe extends de{constructor(){super(t=>t.name),this.classToAllowedProps=new Map}register(t,r){typeof r=="object"?(r.allowProps&&this.classToAllowedProps.set(t,r.allowProps),super.register(t,r.identifier)):super.register(t,r)}getAllowedProps(t){return this.classToAllowedProps.get(t)}}function Ke(e){if("values"in Object)return Object.values(e);const t=[];for(const r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t}function $e(e,t){const r=Ke(e);if("find"in r)return r.find(t);const n=r;for(let o=0;o<n.length;o++){const a=n[o];if(t(a))return a}}function N(e,t){Object.entries(e).forEach(([r,n])=>t(n,r))}function z(e,t){return e.indexOf(t)!==-1}function ie(e,t){for(let r=0;r<e.length;r++){const n=e[r];if(t(n))return n}}class Je{constructor(){this.transfomers={}}register(t){this.transfomers[t.name]=t}findApplicable(t){return $e(this.transfomers,r=>r.isApplicable(t))}findByName(t){return this.transfomers[t]}}const We=e=>Object.prototype.toString.call(e).slice(8,-1),ye=e=>typeof e>"u",Ze=e=>e===null,_=e=>typeof e!="object"||e===null||e===Object.prototype?!1:Object.getPrototypeOf(e)===null?!0:Object.getPrototypeOf(e)===Object.prototype,W=e=>_(e)&&Object.keys(e).length===0,k=e=>Array.isArray(e),Ge=e=>typeof e=="string",Qe=e=>typeof e=="number"&&!isNaN(e),Xe=e=>typeof e=="boolean",Ye=e=>e instanceof RegExp,B=e=>e instanceof Map,j=e=>e instanceof Set,pe=e=>We(e)==="Symbol",et=e=>e instanceof Date&&!isNaN(e.valueOf()),ge=e=>e instanceof Error,oe=e=>typeof e=="number"&&isNaN(e),tt=e=>Xe(e)||Ze(e)||ye(e)||Qe(e)||Ge(e)||pe(e),rt=e=>typeof e=="bigint",nt=e=>e===1/0||e===-1/0,st=e=>ArrayBuffer.isView(e)&&!(e instanceof DataView),it=e=>e instanceof URL,Z=e=>e.replace(/\\/g,"\\\\").replace(/\./g,"\\."),$=e=>e.map(String).map(Z).join("."),V=(e,t)=>{const r=[];let n="";for(let a=0;a<e.length;a++){let i=e.charAt(a);if(!t&&i==="\\"){const f=e.charAt(a+1);if(f==="\\"){n+="\\",a++;continue}else if(f!==".")throw Error("invalid path")}if(i==="\\"&&e.charAt(a+1)==="."){n+=".",a++;continue}if(i==="."){r.push(n),n="";continue}n+=i}const o=n;return r.push(o),r};function S(e,t,r,n){return{isApplicable:e,annotation:t,transform:r,untransform:n}}const he=[S(ye,"undefined",()=>null,()=>{}),S(rt,"bigint",e=>e.toString(),e=>typeof BigInt<"u"?BigInt(e):(console.error("Please add a BigInt polyfill."),e)),S(et,"Date",e=>e.toISOString(),e=>new Date(e)),S(ge,"Error",(e,t)=>{const r={name:e.name,message:e.message};return"cause"in e&&(r.cause=e.cause),t.allowedErrorProps.forEach(n=>{r[n]=e[n]}),r},(e,t)=>{const r=new Error(e.message,{cause:e.cause});return r.name=e.name,r.stack=e.stack,t.allowedErrorProps.forEach(n=>{r[n]=e[n]}),r}),S(Ye,"regexp",e=>""+e,e=>{const t=e.slice(1,e.lastIndexOf("/")),r=e.slice(e.lastIndexOf("/")+1);return new RegExp(t,r)}),S(j,"set",e=>[...e.values()],e=>new Set(e)),S(B,"map",e=>[...e.entries()],e=>new Map(e)),S(e=>oe(e)||nt(e),"number",e=>oe(e)?"NaN":e>0?"Infinity":"-Infinity",Number),S(e=>e===0&&1/e===-1/0,"number",()=>"-0",Number),S(it,"URL",e=>e.toString(),e=>new URL(e))];function H(e,t,r,n){return{isApplicable:e,annotation:t,transform:r,untransform:n}}const me=H((e,t)=>pe(e)?!!t.symbolRegistry.getIdentifier(e):!1,(e,t)=>["symbol",t.symbolRegistry.getIdentifier(e)],e=>e.description,(e,t,r)=>{const n=r.symbolRegistry.getValue(t[1]);if(!n)throw new Error("Trying to deserialize unknown symbol");return n}),ot=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((e,t)=>(e[t.name]=t,e),{}),we=H(st,e=>["typed-array",e.constructor.name],e=>[...e],(e,t)=>{const r=ot[t[1]];if(!r)throw new Error("Trying to deserialize unknown typed array");return new r(e)});function be(e,t){return e!=null&&e.constructor?!!t.classRegistry.getIdentifier(e.constructor):!1}const Fe=H(be,(e,t)=>["class",t.classRegistry.getIdentifier(e.constructor)],(e,t)=>{const r=t.classRegistry.getAllowedProps(e.constructor);if(!r)return{...e};const n={};return r.forEach(o=>{n[o]=e[o]}),n},(e,t,r)=>{const n=r.classRegistry.getValue(t[1]);if(!n)throw new Error(`Trying to deserialize unknown class '${t[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(n.prototype),e)}),Ae=H((e,t)=>!!t.customTransformerRegistry.findApplicable(e),(e,t)=>["custom",t.customTransformerRegistry.findApplicable(e).name],(e,t)=>t.customTransformerRegistry.findApplicable(e).serialize(e),(e,t,r)=>{const n=r.customTransformerRegistry.findByName(t[1]);if(!n)throw new Error("Trying to deserialize unknown custom value");return n.deserialize(e)}),at=[Fe,me,Ae,we],ae=(e,t)=>{const r=ie(at,o=>o.isApplicable(e,t));if(r)return{value:r.transform(e,t),type:r.annotation(e,t)};const n=ie(he,o=>o.isApplicable(e,t));if(n)return{value:n.transform(e,t),type:n.annotation}},Ee={};he.forEach(e=>{Ee[e.annotation]=e});const lt=(e,t,r)=>{if(k(t))switch(t[0]){case"symbol":return me.untransform(e,t,r);case"class":return Fe.untransform(e,t,r);case"custom":return Ae.untransform(e,t,r);case"typed-array":return we.untransform(e,t,r);default:throw new Error("Unknown transformation: "+t)}else{const n=Ee[t];if(!n)throw new Error("Unknown transformation: "+t);return n.untransform(e,r)}},T=(e,t)=>{if(t>e.size)throw new Error("index out of bounds");const r=e.keys();for(;t>0;)r.next(),t--;return r.next().value};function Se(e){if(z(e,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(z(e,"prototype"))throw new Error("prototype is not allowed as a property");if(z(e,"constructor"))throw new Error("constructor is not allowed as a property")}const ft=(e,t)=>{Se(t);for(let r=0;r<t.length;r++){const n=t[r];if(j(e))e=T(e,+n);else if(B(e)){const o=+n,a=+t[++r]==0?"key":"value",i=T(e,o);switch(a){case"key":e=i;break;case"value":e=e.get(i);break}}else e=e[n]}return e},G=(e,t,r)=>{if(Se(t),t.length===0)return r(e);let n=e;for(let a=0;a<t.length-1;a++){const i=t[a];if(k(n)){const l=+i;n=n[l]}else if(_(n))n=n[i];else if(j(n)){const l=+i;n=T(n,l)}else if(B(n)){if(a===t.length-2)break;const d=+i,f=+t[++a]==0?"key":"value",m=T(n,d);switch(f){case"key":n=m;break;case"value":n=n.get(m);break}}}const o=t[t.length-1];if(k(n)?n[+o]=r(n[+o]):_(n)&&(n[o]=r(n[o])),j(n)){const a=T(n,+o),i=r(a);a!==i&&(n.delete(a),n.add(i))}if(B(n)){const a=+t[t.length-2],i=T(n,a);switch(+o==0?"key":"value"){case"key":{const d=r(i);n.set(d,n.get(i)),d!==i&&n.delete(i);break}case"value":{n.set(i,r(n.get(i)));break}}}return e},Oe=e=>e<1;function Q(e,t,r,n=[]){if(!e)return;const o=Oe(r);if(!k(e)){N(e,(l,d)=>Q(l,t,r,[...n,...V(d,o)]));return}const[a,i]=e;i&&N(i,(l,d)=>{Q(l,t,r,[...n,...V(d,o)])}),t(a,n)}function ut(e,t,r,n){return Q(t,(o,a)=>{e=G(e,a,i=>lt(i,o,n))},r),e}function ct(e,t,r){const n=Oe(r);function o(a,i){const l=ft(e,V(i,n));a.map(d=>V(d,n)).forEach(d=>{e=G(e,d,()=>l)})}if(k(t)){const[a,i]=t;a.forEach(l=>{e=G(e,V(l,n),()=>e)}),i&&N(i,o)}else N(t,o);return e}const dt=(e,t)=>_(e)||k(e)||B(e)||j(e)||ge(e)||be(e,t);function yt(e,t,r){const n=r.get(e);n?n.push(t):r.set(e,[t])}function pt(e,t){const r={};let n;return e.forEach(o=>{if(o.length<=1)return;t||(o=o.map(l=>l.map(String)).sort((l,d)=>l.length-d.length));const[a,...i]=o;a.length===0?n=i.map($):r[$(a)]=i.map($)}),n?W(r)?[n]:[n,r]:W(r)?void 0:r}const ve=(e,t,r,n,o=[],a=[],i=new Map)=>{const l=tt(e);if(!l){yt(e,o,t);const s=i.get(e);if(s)return n?{transformedValue:null}:s}if(!dt(e,r)){const s=ae(e,r),u=s?{transformedValue:s.value,annotations:[s.type]}:{transformedValue:e};return l||i.set(e,u),u}if(z(a,e))return{transformedValue:null};const d=ae(e,r),f=(d==null?void 0:d.value)??e,m=k(f)?[]:{},O={};N(f,(s,u)=>{if(u==="__proto__"||u==="constructor"||u==="prototype")throw new Error(`Detected property ${u}. This is a prototype pollution risk, please remove it from your object.`);const F=ve(s,t,r,n,[...o,u],[...a,e],i);m[u]=F.transformedValue,k(F.annotations)?O[Z(u)]=F.annotations:_(F.annotations)&&N(F.annotations,(x,L)=>{O[Z(u)+"."+L]=x})});const v=W(O)?{transformedValue:m,annotations:d?[d.type]:void 0}:{transformedValue:m,annotations:d?[d.type,O]:O};return l||i.set(e,v),v};function Re(e){return Object.prototype.toString.call(e).slice(8,-1)}function le(e){return Re(e)==="Array"}function gt(e){if(Re(e)!=="Object")return!1;const t=Object.getPrototypeOf(e);return!!t&&t.constructor===Object&&t===Object.prototype}function ht(e,t,r,n,o){const a={}.propertyIsEnumerable.call(n,t)?"enumerable":"nonenumerable";a==="enumerable"&&(e[t]=r),o&&a==="nonenumerable"&&Object.defineProperty(e,t,{value:r,enumerable:!1,writable:!0,configurable:!0})}function X(e,t={}){if(le(e))return e.map(o=>X(o,t));if(!gt(e))return e;const r=Object.getOwnPropertyNames(e),n=Object.getOwnPropertySymbols(e);return[...r,...n].reduce((o,a)=>{if(a==="__proto__"||le(t.props)&&!t.props.includes(a))return o;const i=e[a],l=X(i,t);return ht(o,a,l,e,t.nonenumerable),o},{})}class c{constructor({dedupe:t=!1}={}){this.classRegistry=new qe,this.symbolRegistry=new de(r=>r.description??""),this.customTransformerRegistry=new Je,this.allowedErrorProps=[],this.dedupe=t}serialize(t){const r=new Map,n=ve(t,r,this,this.dedupe),o={json:n.transformedValue};n.annotations&&(o.meta={...o.meta,values:n.annotations});const a=pt(r,this.dedupe);return a&&(o.meta={...o.meta,referentialEqualities:a}),o.meta&&(o.meta.v=1),o}deserialize(t,r){const{json:n,meta:o}=t;let a=r!=null&&r.inPlace?n:X(n);return o!=null&&o.values&&(a=ut(a,o.values,o.v??0,this)),o!=null&&o.referentialEqualities&&(a=ct(a,o.referentialEqualities,o.v??0)),a}stringify(t){return JSON.stringify(this.serialize(t))}parse(t){return this.deserialize(JSON.parse(t),{inPlace:!0})}registerClass(t,r){this.classRegistry.register(t,r)}registerSymbol(t,r){this.symbolRegistry.register(t,r)}registerCustom(t,r){this.customTransformerRegistry.register({name:r,...t})}allowErrorProps(...t){this.allowedErrorProps.push(...t)}}c.defaultInstance=new c;c.serialize=c.defaultInstance.serialize.bind(c.defaultInstance);c.deserialize=c.defaultInstance.deserialize.bind(c.defaultInstance);c.stringify=c.defaultInstance.stringify.bind(c.defaultInstance);c.parse=c.defaultInstance.parse.bind(c.defaultInstance);c.registerClass=c.defaultInstance.registerClass.bind(c.defaultInstance);c.registerSymbol=c.defaultInstance.registerSymbol.bind(c.defaultInstance);c.registerCustom=c.defaultInstance.registerCustom.bind(c.defaultInstance);c.allowErrorProps=c.defaultInstance.allowErrorProps.bind(c.defaultInstance);c.serialize;c.deserialize;c.stringify;c.parse;c.registerClass;c.registerCustom;c.registerSymbol;c.allowErrorProps;function mt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var J,fe;function wt(){if(fe)return J;fe=1;for(var e=Math.floor(Math.random()*16777215),t=f.index=parseInt(Math.random()*16777215,10),r=(typeof process>"u"||typeof process.pid!="number"?Math.floor(Math.random()*1e5):process.pid)%65535,n=(()=>{try{return _Buffer}catch{try{return Buffer}catch{return null}}})(),o=function(s){return!!(s!=null&&s.constructor&&typeof s.constructor.isBuffer=="function"&&s.constructor.isBuffer(s))},a=[],i=0;i<256;i++)a[i]=(i<=15?"0":"")+i.toString(16);var l=new RegExp("^[0-9a-fA-F]{24}$"),d=[];for(i=0;i<10;)d[48+i]=i++;for(;i<16;)d[55+i]=d[87+i]=i++;function f(s){if(!(this instanceof f))return new f(s);if(s&&(s instanceof f||s._bsontype==="ObjectID"))return s;if(this._bsontype="ObjectID",s==null||typeof s=="number"){this.id=this.generate(s);return}var u=f.isValid(s);if(!u&&s!=null)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(u&&typeof s=="string"&&s.length===24)return f.createFromHexString(s);if(s!=null&&s.length===12)this.id=s;else{if(s!=null&&typeof s.toHexString=="function")return s;throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}}J=f,f.default=f,f.createFromTime=function(s){return s=parseInt(s,10)%4294967295,new f(O(8,s)+"0000000000000000")},f.createFromHexString=function(s){if(typeof s>"u"||s!=null&&s.length!==24)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");for(var u="",F=0;F<24;)u+=String.fromCharCode(d[s.charCodeAt(F++)]<<4|d[s.charCodeAt(F++)]);return new f(u)},f.isValid=function(s){return s==null?!1:typeof s=="number"?!0:typeof s=="string"?s.length===12||s.length===24&&l.test(s):s instanceof f?!0:o(s)?f.isValid(s.toString("hex")):typeof s.toHexString=="function"&&n&&(s.id instanceof n||typeof s.id=="string")?s.id.length===12||s.id.length===24&&l.test(s.id):!1},f.prototype={constructor:f,toHexString:function(){if(!this.id||!this.id.length)throw new Error("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id.length===24)return this.id;if(o(this.id))return this.id.toString("hex");for(var s="",u=0;u<this.id.length;u++)s+=a[this.id.charCodeAt(u)];return s},equals:function(s){return s instanceof f?this.toString()===s.toString():typeof s=="string"&&f.isValid(s)&&s.length===12&&o(this.id)?s===this.id.toString("binary"):typeof s=="string"&&f.isValid(s)&&s.length===24?s.toLowerCase()===this.toHexString():typeof s=="string"&&f.isValid(s)&&s.length===12?s===this.id:s!=null&&(s instanceof f||s.toHexString)?s.toHexString()===this.toHexString():!1},getTimestamp:function(){var s=new Date,u;return o(this.id)?u=this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24:u=this.id.charCodeAt(3)|this.id.charCodeAt(2)<<8|this.id.charCodeAt(1)<<16|this.id.charCodeAt(0)<<24,s.setTime(Math.floor(u)*1e3),s},generate:function(s){typeof s!="number"&&(s=~~(Date.now()/1e3)),s=parseInt(s,10)%4294967295;var u=m();return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255,e>>16&255,e>>8&255,e&255,r>>8&255,r&255,u>>16&255,u>>8&255,u&255)}};function m(){return t=(t+1)%16777215}function O(s,u){return u=u.toString(16),u.length===s?u:"00000000".substring(u.length,s)+u}var v=Symbol&&Symbol.for&&Symbol.for("nodejs.util.inspect.custom")||"inspect";return f.prototype[v]=function(){return"ObjectID("+this+")"},f.prototype.toJSON=f.prototype.toHexString,f.prototype.toString=f.prototype.toHexString,J}var bt=wt();const ue=mt(bt);c.registerCustom({isApplicable:e=>{if(typeof e!="string"&&ue.isValid(e)){const t=e.toString();return/^[0-9a-fA-F]{24}$/.test(t)}return!1},serialize:e=>e.toString(),deserialize:e=>new ue(e)},"ObjectId");function Et({fetch:e,origin:t}={}){const r=`${window.location.origin}${Pe}/api/v2`;return He(r,{fetcher:e})}function St(e){if(e.error)throw new Error(JSON.stringify(e.error));return c.parse(typeof e.data=="string"?e.data:JSON.stringify(e.data))}export{mt as g,St as h,Et as u};
